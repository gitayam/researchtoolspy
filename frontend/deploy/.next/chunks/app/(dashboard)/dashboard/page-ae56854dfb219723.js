(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6337],{25731:(e,s,t)=>{"use strict";t.d(s,{u:()=>i});var r=t(23464);let a="http://localhost:8000/api/v1";console.log("API Client initialized with base URL:",a);class n{handleError(e){if(e.response){let t=e.response.data,r="An error occurred";if(null==t?void 0:t.detail)if("string"==typeof t.detail)r=t.detail;else if(Array.isArray(t.detail)){var s;r=(null==(s=t.detail[0])?void 0:s.msg)||"Invalid input"}else"object"==typeof t.detail&&(r=t.detail.message||JSON.stringify(t.detail));else(null==t?void 0:t.message)&&(r=t.message);return{message:r,status:e.response.status,details:t}}return e.request?{message:"Network error - please check your connection",status:0}:{message:e.message||"An unexpected error occurred",status:0}}loadTokensFromStorage(){try{if(window.localStorage){let s=localStorage.getItem("omnicore_tokens");if(console.log("\uD83D\uDD0D API Client: Loading tokens from storage:",s?"Found tokens":"No tokens found"),s){var e;this.tokens=JSON.parse(s),console.log("✅ API Client: Tokens loaded successfully, expires at:",new Date(Date.now()+1e3*((null==(e=this.tokens)?void 0:e.expires_in)||0)).toLocaleTimeString())}}}catch(e){console.error("❌ API Client: Failed to load tokens from storage:",e)}}saveTokensToStorage(e){try{window.localStorage&&(console.log("\uD83D\uDCBE API Client: Saving tokens to storage, expires in:",e.expires_in,"seconds"),localStorage.setItem("omnicore_tokens",JSON.stringify(e)),console.log("✅ API Client: Tokens saved successfully")),this.tokens=e}catch(e){console.error("❌ API Client: Failed to save tokens to storage:",e)}}clearTokens(){console.log("\uD83D\uDDD1️ API Client: Clearing tokens from storage"),this.tokens=null,localStorage.removeItem("omnicore_tokens"),console.log("✅ API Client: Tokens cleared from localStorage")}async login(e){let s=new URLSearchParams;s.append("username",e.username),s.append("password",e.password);let t=await this.client.post("/auth/login",s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return this.saveTokensToStorage(t.data),{user:await this.getCurrentUser(),tokens:t.data}}async registerWithHash(){console.log("API Client: Requesting new hash registration from backend");let e=await this.client.post("/hash-auth/register");return console.log("API Client: Hash registration successful:",{hash:e.data.account_hash.substring(0,4)+"...",created_at:e.data.created_at}),e.data}async loginWithHash(e){try{console.log("API Client: Making hash auth request to:","".concat(a,"/hash-auth/authenticate")),console.log("API Client: Hash credentials:",e);let s=await this.client.post("/hash-auth/authenticate",e);console.log("API Client: Hash auth response received:",{status:s.status,hasAccessToken:!!s.data.access_token,tokenType:s.data.token_type,role:s.data.role});let t={access_token:s.data.access_token,refresh_token:s.data.refresh_token,token_type:s.data.token_type,expires_in:s.data.expires_in};return this.saveTokensToStorage(t),{user:{id:1,username:"user_".concat(e.account_hash.substring(0,8)),email:"anonymous@researchtools.dev",full_name:"Research Analyst",role:s.data.role,is_active:!0,is_verified:!0,account_hash:s.data.account_hash,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},tokens:t}}catch(e){var s,t;if((null==(s=e.response)?void 0:s.status)===401)throw{message:"Invalid account hash. Please check your account number.",status:401,details:null==(t=e.response)?void 0:t.data};throw e}}async register(e){return(await this.client.post("/auth/register",e)).data}async refreshToken(){var e;if(!(null==(e=this.tokens)?void 0:e.refresh_token))throw Error("No refresh token available");let s=await this.client.post("/auth/refresh",{refresh_token:this.tokens.refresh_token});return this.saveTokensToStorage(s.data),s.data}async getCurrentUser(){return(await this.client.get("/auth/me")).data}logout(){this.clearTokens()}async get(e,s){return(await this.client.get(e,s)).data}async post(e,s){return(await this.client.post(e,s)).data}async put(e,s){return(await this.client.put(e,s)).data}async patch(e,s){return(await this.client.patch(e,s)).data}async delete(e){await this.client.delete(e)}isAuthenticated(){var e,s;let t=!!(null==(e=this.tokens)?void 0:e.access_token);return console.log("\uD83D\uDD10 API Client: isAuthenticated check:",t,(null==(s=this.tokens)?void 0:s.access_token)?"Token exists":"No token"),t}getTokens(){return this.tokens}async healthCheck(){return(await this.client.get("/health")).data}constructor(){this.tokens=null,console.log("\uD83C\uDFD7️ API Client: Constructor called, initializing..."),this.client=r.A.create({baseURL:a,headers:{"Content-Type":"application/json"}}),console.log("\uD83C\uDFD7️ API Client: Loading tokens on initialization..."),this.loadTokensFromStorage(),this.client.interceptors.request.use(e=>{var s;return(null==(s=this.tokens)?void 0:s.access_token)&&(e.headers.Authorization="Bearer ".concat(this.tokens.access_token)),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var s,t;let r=e.config;if((null==(s=e.response)?void 0:s.status)===401&&r&&!r._retry){r._retry=!0;try{return await this.refreshToken(),(null==(t=this.tokens)?void 0:t.access_token)&&r.headers&&(r.headers.Authorization="Bearer ".concat(this.tokens.access_token)),this.client.request(r)}catch(e){return this.clearTokens(),window.location.href="/login",Promise.reject(e)}}return Promise.reject(this.handleError(e))}),this.loadTokensFromStorage()}}let o=null,i=new Proxy({},{get(e,s){if(o||(console.log("\uD83C\uDFAF API Client: Initializing singleton on first access"),o=new n),!o)return"string"==typeof s&&"then"!==s?()=>Promise.resolve(null):void 0;let t=o[s];return"function"==typeof t?t.bind(o):t}})},30285:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var r=t(95155),a=t(12115),n=t(99708),o=t(74466),i=t(59434);let l=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,size:o,asChild:c=!1,...d}=e,h=c?n.DX:"button";return(0,r.jsx)(h,{className:(0,i.cn)(l({variant:a,size:o,className:t})),ref:s,...d})});c.displayName="Button"},48506:(e,s,t)=>{Promise.resolve().then(t.bind(t,83833))},59434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n,fw:()=>o});var r=t(52596),a=t(39688);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}function o(e){let s=new Date,t=new Date(e);if(isNaN(t.getTime()))return"Invalid date";let r=Math.floor((s.getTime()-t.getTime())/1e3);if(r<60)return"just now";if(r<3600)return"".concat(Math.floor(r/60),"m ago");if(r<86400)return"".concat(Math.floor(r/3600),"h ago");if(r<604800)return"".concat(Math.floor(r/86400),"d ago");let a=new Date(e);return isNaN(a.getTime())?"Invalid date":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)}},66695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>o,aR:()=>i});var r=t(95155),a=t(12115),n=t(59434);let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});o.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},83833:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b,dynamic:()=>N});var r=t(95155),a=t(12115),n=t(6874),o=t.n(n),i=t(16785),l=t(49376),c=t(72713),d=t(47924),h=t(57434),u=t(79397),m=t(14186),g=t(17580),f=t(84616),x=t(66695),p=t(30285),y=t(65453),w=t(46786),v=t(25731);let j=(0,y.v)()((0,w.lt)((e,s)=>({currentSession:null,sessions:[],recentSessions:[],isLoading:!1,error:null,setCurrentSession:t=>{if(e({currentSession:t}),t){let{recentSessions:r}=s();r.some(e=>e.id===t.id)||e({recentSessions:[t,...r.slice(0,4)]})}},setSessions:s=>{e({sessions:s})},addSession:s=>{e(e=>({sessions:[s,...e.sessions]}))},updateSession:(s,t)=>{e(e=>{var r;return{sessions:e.sessions.map(e=>e.id===s?{...e,...t}:e),currentSession:(null==(r=e.currentSession)?void 0:r.id)===s?{...e.currentSession,...t}:e.currentSession,recentSessions:e.recentSessions.map(e=>e.id===s?{...e,...t}:e)}})},removeSession:s=>{e(e=>{var t;return{sessions:e.sessions.filter(e=>e.id!==s),currentSession:(null==(t=e.currentSession)?void 0:t.id)===s?null:e.currentSession,recentSessions:e.recentSessions.filter(e=>e.id!==s)}})},setRecentSessions:s=>{e({recentSessions:s})},addRecentSession:s=>{e(e=>{let t=e.recentSessions.filter(e=>e.id!==s.id);return{recentSessions:[s,...t].slice(0,5)}})},setLoading:s=>{e({isLoading:s})},setError:s=>{e({error:s})},clearError:()=>{e({error:null})},fetchSessions:async()=>{try{e({isLoading:!0,error:null});let s=await v.u.get("/frameworks/");e({sessions:s,isLoading:!1})}catch(s){console.warn("Failed to fetch sessions, using empty data:",s.message),e({sessions:[],isLoading:!1,error:null})}},fetchRecentSessions:async()=>{try{e({isLoading:!0,error:null});let s=(await v.u.get("/frameworks/")).sort((e,s)=>new Date(s.updated_at).getTime()-new Date(e.updated_at).getTime()).slice(0,5);e({recentSessions:s,isLoading:!1})}catch(s){console.warn("Failed to fetch recent sessions, using empty data:",s.message),e({recentSessions:[],isLoading:!1,error:null})}},refreshData:async()=>{let e=s();await Promise.all([e.fetchSessions(),e.fetchRecentSessions()])},getSessionsByType:e=>s().sessions.filter(s=>s.framework_type===e),getSessionsByStatus:e=>s().sessions.filter(s=>s.status===e),getSessionById:e=>s().sessions.find(s=>s.id===e)}),{name:"framework-store"}));var k=t(59434);let N="force-dynamic";function b(){let e=j(e=>e.recentSessions),s=j(e=>e.sessions),t=j(e=>e.isLoading),n=j(e=>e.fetchSessions),y=j(e=>e.fetchRecentSessions);(0,a.useEffect)(()=>{n(),y()},[]);let w=(0,a.useMemo)(()=>{let e=s.filter(e=>"swot"===e.framework_type).length,t=s.filter(e=>"cog"===e.framework_type).length,r=s.filter(e=>"pmesii-pt"===e.framework_type).length,a=s.filter(e=>"ach"===e.framework_type).length;return[{name:"SWOT Analysis",count:e,trend:e>0?"".concat(e," analyses"):"No analyses yet",icon:i.A,color:"bg-blue-500"},{name:"COG Analysis",count:t,trend:t>0?"".concat(t," analyses"):"No analyses yet",icon:l.A,color:"bg-green-500"},{name:"PMESII-PT",count:r,trend:r>0?"".concat(r," analyses"):"No analyses yet",icon:c.A,color:"bg-purple-500"},{name:"ACH Analysis",count:a,trend:a>0?"".concat(a," analyses"):"No analyses yet",icon:d.A,color:"bg-orange-500"}]},[s]),v=s.length,N=s.filter(e=>"in_progress"===e.status).length,b=s.filter(e=>"completed"===e.status).length,S=[{title:"New SWOT Analysis",description:"Strategic planning analysis",href:"/analysis-frameworks/swot/create",icon:i.A,color:"bg-blue-500 hover:bg-blue-600"},{title:"COG Analysis",description:"Center of gravity assessment",href:"/analysis-frameworks/cog/create",icon:l.A,color:"bg-green-500 hover:bg-green-600"},{title:"Research Tools",description:"URL processing & citations",href:"/tools",icon:d.A,color:"bg-purple-500 hover:bg-purple-600"},{title:"View Reports",description:"Export and share analyses",href:"/reports",icon:h.A,color:"bg-orange-500 hover:bg-orange-600"}];return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 rounded-lg p-6 text-white",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Welcome to Research Analysis Tools"}),(0,r.jsx)("p",{className:"text-blue-100",children:"Continue your research analysis work or start a new framework."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(x.ZB,{className:"text-sm font-medium",children:"Total Analyses"}),(0,r.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(x.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t?"...":v}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:0===v?"Start creating analyses":"Total analyses created"})]})]}),(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(x.ZB,{className:"text-sm font-medium",children:"Active Sessions"}),(0,r.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(x.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t?"...":N}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:0===N?"No active sessions":"In progress analyses"})]})]}),(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(x.ZB,{className:"text-sm font-medium",children:"Completed"}),(0,r.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(x.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t?"...":b}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:0===b?"No completed analyses":"Completed analyses"})]})]}),(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(x.ZB,{className:"text-sm font-medium",children:"Shared"}),(0,r.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(x.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"0"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Coming soon"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:S.map(e=>(0,r.jsx)(o(),{href:e.href,children:(0,r.jsx)(x.Zp,{className:"hover:shadow-md transition-shadow cursor-pointer h-full",children:(0,r.jsxs)(x.aR,{children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg ".concat(e.color," flex items-center justify-center mb-2"),children:(0,r.jsx)(e.icon,{className:"h-5 w-5 text-white"})}),(0,r.jsx)(x.ZB,{className:"text-sm",children:e.title}),(0,r.jsx)(x.BT,{className:"text-xs",children:e.description})]})})},e.title))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"h-5 w-5"}),"Recent Activity"]})}),(0,r.jsx)(x.Wu,{children:e.length>0?(0,r.jsx)("div",{className:"space-y-3",children:e.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-4 w-4 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)(o(),{href:"/analysis-frameworks/".concat(e.framework_type,"/").concat(e.id),className:"text-sm font-medium text-gray-900 dark:text-white hover:text-blue-600",children:e.title}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.framework_type.toUpperCase()," • ",(0,k.fw)(e.updated_at)]})]}),(0,r.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status.replace("_"," ")})]},e.id))}):(0,r.jsxs)("div",{className:"text-center py-6",children:[(0,r.jsx)(l.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No recent activity"}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Start a new analysis to see it here"})]})})]}),(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(c.A,{className:"h-5 w-5"}),"Framework Usage"]})}),(0,r.jsx)(x.Wu,{children:(0,r.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 ".concat(e.color," rounded-full flex items-center justify-center"),children:(0,r.jsx)(e.icon,{className:"h-4 w-4 text-white"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:e.count})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.trend})]})]},e.name))})})]})]}),(0,r.jsx)(x.Zp,{className:"border-dashed border-2 border-gray-300 dark:border-gray-600",children:(0,r.jsxs)(x.Wu,{className:"flex flex-col items-center justify-center py-8",children:[(0,r.jsx)(f.A,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Start a New Analysis"}),(0,r.jsx)("p",{className:"text-gray-500 text-center mb-4",children:"Choose from 10 research analysis frameworks to begin your research"}),(0,r.jsx)(o(),{href:"/frameworks",children:(0,r.jsxs)(p.$,{children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Create Analysis"]})})]})})]})}}},e=>{e.O(0,[7598,4134,3464,6874,4306,8441,5964,7358],()=>e(e.s=48506)),_N_E=e.O()}]);