
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for lib/ai-analysis.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../index.html">All files</a> / <a href="index.html">lib</a> ai-analysis.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/75</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/37</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/16</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/70</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a>
<a name='L212'></a><a href='#L212'>212</a>
<a name='L213'></a><a href='#L213'>213</a>
<a name='L214'></a><a href='#L214'>214</a>
<a name='L215'></a><a href='#L215'>215</a>
<a name='L216'></a><a href='#L216'>216</a>
<a name='L217'></a><a href='#L217'>217</a>
<a name='L218'></a><a href='#L218'>218</a>
<a name='L219'></a><a href='#L219'>219</a>
<a name='L220'></a><a href='#L220'>220</a>
<a name='L221'></a><a href='#L221'>221</a>
<a name='L222'></a><a href='#L222'>222</a>
<a name='L223'></a><a href='#L223'>223</a>
<a name='L224'></a><a href='#L224'>224</a>
<a name='L225'></a><a href='#L225'>225</a>
<a name='L226'></a><a href='#L226'>226</a>
<a name='L227'></a><a href='#L227'>227</a>
<a name='L228'></a><a href='#L228'>228</a>
<a name='L229'></a><a href='#L229'>229</a>
<a name='L230'></a><a href='#L230'>230</a>
<a name='L231'></a><a href='#L231'>231</a>
<a name='L232'></a><a href='#L232'>232</a>
<a name='L233'></a><a href='#L233'>233</a>
<a name='L234'></a><a href='#L234'>234</a>
<a name='L235'></a><a href='#L235'>235</a>
<a name='L236'></a><a href='#L236'>236</a>
<a name='L237'></a><a href='#L237'>237</a>
<a name='L238'></a><a href='#L238'>238</a>
<a name='L239'></a><a href='#L239'>239</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * AI Analysis Service for ACH Executive Summaries
 * Uses GPT-5-mini for generating professional intelligence analysis
 */
&nbsp;
import OpenAI from <span class="cstat-no" title="statement not covered" >'openai'</span>
import { ACHExportData } from './ach-export'
&nbsp;
// Initialize OpenAI client - will use environment variable or fallback
const openai = <span class="cstat-no" title="statement not covered" >new OpenAI({</span>
  apiKey: process.env.NEXT_PUBLIC_OPENAI_API_KEY || 'demo-key',
  dangerouslyAllowBrowser: true // Only for client-side usage in demo
})
&nbsp;
export interface AIAnalysisResult {
  executiveSummary: string
  keyFindings: string[]
  recommendations: string[]
  confidenceAssessment: string
  alternativeExplanations: string[]
  gaps: string[]
}
&nbsp;
/**
 * Generate executive summary using GPT-5-mini
 */
export async function <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >generateExecutiveSummary(d</span></span>ata: ACHExportData): Promise&lt;AIAnalysisResult&gt; {
<span class="cstat-no" title="statement not covered" >  try {</span>
    // Prepare analysis context
    const analysisContext = <span class="cstat-no" title="statement not covered" >prepareAnalysisContext(data)</span>
    
    const prompt = <span class="cstat-no" title="statement not covered" >`You are a senior intelligence analyst conducting an Analysis of Competing Hypotheses (ACH). Based on the following analysis data, provide a professional assessment for a military commander's briefing.</span>
&nbsp;
ANALYSIS CONTEXT:
${analysisContext}
&nbsp;
Please provide a structured response with:
&nbsp;
1. EXECUTIVE SUMMARY (single concise paragraph):
   - Write as if briefing a commander (CDR) following ACH methodology principles
   - Focus on hypotheses that can be dismissed/ruled out based on evidence
   - Identify remaining viable hypotheses rather than selecting one "most likely"
   - Emphasize what we can confidently eliminate vs. what remains plausible
   - Keep it focused, direct, and tactical - no more than 4-5 sentences
&nbsp;
2. KEY FINDINGS (3-5 bullet points):
   - Most significant insights from the analysis
   - Critical evidence that drives conclusions
   - Evidence quality and credibility factors
&nbsp;
3. RECOMMENDATIONS (2-4 bullet points):
   - Specific actionable recommendations based on findings
   - Areas for additional collection or investigation
   - Risk mitigation considerations
&nbsp;
4. CONFIDENCE ASSESSMENT (1 paragraph):
   - Overall confidence in the primary hypothesis
   - Factors affecting confidence (evidence quality, quantity, consistency)
   - Limitations and uncertainties
&nbsp;
5. ALTERNATIVE EXPLANATIONS (2-3 bullet points):
   - Other plausible hypotheses that remain viable
   - Why they are less likely but still possible
&nbsp;
6. INTELLIGENCE GAPS (2-3 bullet points):
   - Missing information that would strengthen analysis
   - Collection priorities for follow-up
&nbsp;
Format your response as JSON with the following structure:
{
  "executiveSummary": "...",
  "keyFindings": ["...", "..."],
  "recommendations": ["...", "..."],
  "confidenceAssessment": "...",
  "alternativeExplanations": ["...", "..."],
  "gaps": ["...", "..."]
}
&nbsp;
Ensure your analysis is professional, objective, and follows intelligence community standards.`
&nbsp;
    const response = <span class="cstat-no" title="statement not covered" >await openai.chat.completions.create({</span>
      model: 'gpt-4o-mini', // Using GPT-4o-mini as GPT-5-mini isn't available yet
      messages: [
        {
          role: 'system',
          content: 'You are a senior intelligence analyst with expertise in structured analytic techniques, particularly Analysis of Competing Hypotheses (ACH). You provide objective, professional assessments based on available evidence.'
        },
        {
          role: 'user',
          content: prompt
        }
      ],
      temperature: 0.3, // Lower temperature for more focused, analytical responses
      max_tokens: 2000
    })
&nbsp;
    const content = <span class="cstat-no" title="statement not covered" >response.choices[0]?.message?.content</span>
<span class="cstat-no" title="statement not covered" >    <span class="missing-if-branch" title="if path not taken" >I</span>if (!content) {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('No response from AI service')</span>
    }
&nbsp;
    // Parse the JSON response
    const analysisResult = <span class="cstat-no" title="statement not covered" >JSON.parse(content) as AIAnalysisResult</span>
<span class="cstat-no" title="statement not covered" >    return analysisResult</span>
&nbsp;
  } catch (error) {
<span class="cstat-no" title="statement not covered" >    console.error('Error generating AI analysis:', error)</span>
    
    // Return fallback analysis if AI fails
<span class="cstat-no" title="statement not covered" >    return generateFallbackAnalysis(data)</span>
  }
}
&nbsp;
/**
 * Prepare analysis context for AI processing
 */
function <span class="fstat-no" title="function not covered" >prepareAnalysisContext(d</span>ata: ACHExportData): string {
  const analysis = <span class="cstat-no" title="statement not covered" >data.analysis || []</span>
  const topHypothesis = <span class="cstat-no" title="statement not covered" >analysis[0]</span>
  const hypothesisText = <span class="cstat-no" title="statement not covered" >data.hypotheses.find(<span class="fstat-no" title="function not covered" >h =&gt; <span class="cstat-no" title="statement not covered" >h</span>.id === topHypothesis?.hypothesisId)?.t</span>ext</span>
&nbsp;
  let context = <span class="cstat-no" title="statement not covered" >`TITLE: ${data.title}\n`</span>
<span class="cstat-no" title="statement not covered" >  <span class="missing-if-branch" title="if path not taken" >I</span>if (data.description) {</span>
<span class="cstat-no" title="statement not covered" >    context += `DESCRIPTION: ${data.description}\n`</span>
  }
<span class="cstat-no" title="statement not covered" >  context += `SCALE TYPE: ${data.scaleType} (${data.scaleType === 'logarithmic' ? 'Fibonacci sequence' : 'Linear 1-5'})\n`</span>
<span class="cstat-no" title="statement not covered" >  context += `ANALYSIS DATE: ${data.createdAt.toLocaleDateString()}\n\n`</span>
&nbsp;
  // Hypotheses
<span class="cstat-no" title="statement not covered" >  context += `HYPOTHESES (${data.hypotheses.length} total):\n`</span>
<span class="cstat-no" title="statement not covered" >  data.hypotheses.forEach(<span class="fstat-no" title="function not covered" >(h</span>, index) =&gt; {</span>
    const analysisData = <span class="cstat-no" title="statement not covered" >analysis.find(<span class="fstat-no" title="function not covered" >a =&gt; <span class="cstat-no" title="statement not covered" >a</span>.hypothesisId === h.id)</span></span>
<span class="cstat-no" title="statement not covered" >    context += `H${index + 1}: ${h.text}\n`</span>
<span class="cstat-no" title="statement not covered" >    <span class="missing-if-branch" title="if path not taken" >I</span>if (analysisData) {</span>
<span class="cstat-no" title="statement not covered" >      context += `   - Weighted Score: ${analysisData.weightedScore.toFixed(2)}\n`</span>
<span class="cstat-no" title="statement not covered" >      context += `   - Supporting Evidence: ${analysisData.supportingEvidence}\n`</span>
<span class="cstat-no" title="statement not covered" >      context += `   - Contradicting Evidence: ${analysisData.contradictingEvidence}\n`</span>
<span class="cstat-no" title="statement not covered" >      context += `   - Confidence: ${analysisData.confidenceLevel}\n`</span>
<span class="cstat-no" title="statement not covered" >      context += `   - Status: ${analysisData.rejectionThreshold ? 'REJECTED' : 'VIABLE'}\n`</span>
    }
<span class="cstat-no" title="statement not covered" >    context += '\n'</span>
  })
&nbsp;
  // Evidence with SATS evaluation
<span class="cstat-no" title="statement not covered" >  context += `EVIDENCE (${data.evidence.length} total):\n`</span>
<span class="cstat-no" title="statement not covered" >  data.evidence.forEach(<span class="fstat-no" title="function not covered" >(e</span>vidence, index) =&gt; {</span>
<span class="cstat-no" title="statement not covered" >    context += `E${index + 1}: ${evidence.text}\n`</span>
<span class="cstat-no" title="statement not covered" >    <span class="missing-if-branch" title="if path not taken" >I</span>if (evidence.confidenceScore) {</span>
<span class="cstat-no" title="statement not covered" >      context += `   - SATS Credibility Score: ${evidence.confidenceScore}/13\n`</span>
      const credibilityLevel = <span class="cstat-no" title="statement not covered" >evidence.confidenceScore &gt;= 11 ? 'VERY HIGH' :</span>
                             evidence.confidenceScore &gt;= 7 ? 'HIGH' :
                             evidence.confidenceScore &gt;= 4 ? 'MODERATE' :
                             evidence.confidenceScore &gt;= 2 ? 'LOW' : 'VERY LOW'
<span class="cstat-no" title="statement not covered" >      context += `   - Credibility Level: ${credibilityLevel}\n`</span>
    }
    
    // Add scoring against hypotheses
<span class="cstat-no" title="statement not covered" >    context += '   - Hypothesis Scores:\n'</span>
<span class="cstat-no" title="statement not covered" >    data.hypotheses.forEach(<span class="fstat-no" title="function not covered" >(h</span>, hIndex) =&gt; {</span>
      const score = <span class="cstat-no" title="statement not covered" >data.scores.get(evidence.id)?.get(h.id)</span>
<span class="cstat-no" title="statement not covered" >      <span class="missing-if-branch" title="if path not taken" >I</span>if (score) {</span>
<span class="cstat-no" title="statement not covered" >        context += `     H${hIndex + 1}: ${score.score &gt; 0 ? '+' : ''}${score.score}\n`</span>
      }
    })
<span class="cstat-no" title="statement not covered" >    context += '\n'</span>
  })
&nbsp;
  // Top hypothesis summary
<span class="cstat-no" title="statement not covered" >  <span class="missing-if-branch" title="if path not taken" >I</span>if (topHypothesis &amp;&amp; hypothesisText) {</span>
<span class="cstat-no" title="statement not covered" >    context += `PRIMARY CONCLUSION:\n`</span>
<span class="cstat-no" title="statement not covered" >    context += `Most Likely Hypothesis: ${hypothesisText}\n`</span>
<span class="cstat-no" title="statement not covered" >    context += `Weighted Score: ${topHypothesis.weightedScore.toFixed(2)}\n`</span>
<span class="cstat-no" title="statement not covered" >    context += `Confidence Level: ${topHypothesis.confidenceLevel}\n`</span>
<span class="cstat-no" title="statement not covered" >    context += `Supporting Evidence Count: ${topHypothesis.supportingEvidence}\n`</span>
<span class="cstat-no" title="statement not covered" >    context += `Contradicting Evidence Count: ${topHypothesis.contradictingEvidence}\n`</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  return context</span>
}
&nbsp;
/**
 * Generate fallback analysis if AI service fails
 */
function <span class="fstat-no" title="function not covered" >generateFallbackAnalysis(d</span>ata: ACHExportData): AIAnalysisResult {
  const analysis = <span class="cstat-no" title="statement not covered" >data.analysis || []</span>
  const topHypothesis = <span class="cstat-no" title="statement not covered" >analysis[0]</span>
  const hypothesisText = <span class="cstat-no" title="statement not covered" >data.hypotheses.find(<span class="fstat-no" title="function not covered" >h =&gt; <span class="cstat-no" title="statement not covered" >h</span>.id === topHypothesis?.hypothesisId)?.t</span>ext || 'Primary hypothesis'</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return {</span>
    executiveSummary: `CDR, ACH analysis of ${data.hypotheses.length} competing hypotheses allows us to dismiss ${analysis.filter(<span class="fstat-no" title="function not covered" >h =&gt; <span class="cstat-no" title="statement not covered" >h</span>.rejectionThreshold)</span>.length} scenarios based on contradictory evidence. ${analysis.filter(<span class="fstat-no" title="function not covered" >h =&gt; <span class="cstat-no" title="statement not covered" >!</span>h.rejectionThreshold)</span>.length} hypotheses remain viable, with "${hypothesisText}" showing strongest support from available evidence. Key focus should be on continued collection to further eliminate remaining possibilities rather than committing to a single explanation.`,
    
    keyFindings: [
      `${analysis.filter(<span class="fstat-no" title="function not covered" >h =&gt; <span class="cstat-no" title="statement not covered" >h</span>.rejectionThreshold)</span>.length} hypotheses dismissed due to contradictory evidence`,
      `${analysis.filter(<span class="fstat-no" title="function not covered" >h =&gt; <span class="cstat-no" title="statement not covered" >!</span>h.rejectionThreshold)</span>.length} hypotheses remain viable based on current evidence`,
      `Evidence evaluation uses SATS-based credibility assessment for systematic analysis`,
      `"${hypothesisText}" shows strongest evidence support among remaining viable options`
    ],
    
    recommendations: [
      'Focus collection efforts on evidence that could further eliminate remaining viable hypotheses',
      'Avoid premature commitment to single explanation until alternatives are ruled out',
      'Monitor indicators that could resurrect dismissed hypotheses or eliminate remaining ones'
    ],
    
    confidenceAssessment: `Overall confidence in the primary hypothesis is ${topHypothesis?.confidenceLevel || 'moderate'} based on the quantity and quality of available evidence. The assessment considers both the consistency of evidence with the hypothesis and the credibility of information sources as evaluated through SATS methodology.`,
    
    alternativeExplanations: analysis.slice(1, 3).map(<span class="fstat-no" title="function not covered" >h =&gt; {</span>
      const hypothesis = <span class="cstat-no" title="statement not covered" >data.hypotheses.find(<span class="fstat-no" title="function not covered" >hyp =&gt; <span class="cstat-no" title="statement not covered" >h</span>yp.id === h.hypothesisId)</span></span>
<span class="cstat-no" title="statement not covered" >      return `${hypothesis?.text || 'Alternative hypothesis'} (Score: ${h.weightedScore.toFixed(2)})`</span>
    }).filter(Boolean),
    
    gaps: [
      'Additional corroborating evidence for primary hypothesis',
      'Information to definitively rule out alternative explanations',
      'Enhanced source evaluation for key pieces of evidence'
    ]
  }
}
&nbsp;
/**
 * Check if AI service is available
 */
export async function <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >checkAIAvailability(): Promise&lt;boolean&gt; {</span></span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    <span class="missing-if-branch" title="if path not taken" >I</span>if (!process.env.NEXT_PUBLIC_OPENAI_API_KEY || process.env.NEXT_PUBLIC_OPENAI_API_KEY === 'demo-key') {</span>
<span class="cstat-no" title="statement not covered" >      return false</span>
    }
    
    const response = <span class="cstat-no" title="statement not covered" >await openai.chat.completions.create({</span>
      model: 'gpt-4o-mini',
      messages: [{ role: 'user', content: 'Test' }],
      max_tokens: 1
    })
    
<span class="cstat-no" title="statement not covered" >    return !!response.choices[0]</span>
  } catch {
<span class="cstat-no" title="statement not covered" >    return false</span>
  }
}</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-09-09T04:42:23.551Z
            </div>
        <script src="../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../sorter.js"></script>
        <script src="../block-navigation.js"></script>
    </body>
</html>
    