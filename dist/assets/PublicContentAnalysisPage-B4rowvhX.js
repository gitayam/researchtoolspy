import{j as e}from"./ui-vendor-DBphXmDA.js";import{k,r as m}from"./react-vendor-CfYLSWvh.js";import{d as C,B as h,e as i}from"./index-QqleixXe.js";import{C as t,d as n,a as c,b as d}from"./card-BGAig-Dv.js";import{_ as A,a5 as L,P as E,a1 as S,aO as z,ah as B,E as u,A as P,G as f}from"./icons-x9tcvtYN.js";import"./state-vendor-BXB5jEEt.js";function G(){const{token:o}=k(),[s,N]=m.useState(null),[y,j]=m.useState(!0),[p,g]=m.useState(null),{toast:v}=C();m.useEffect(()=>{b()},[o]);const b=async()=>{if(o)try{j(!0);const a=await fetch(`/api/content-intelligence/public/${o}`);if(!a.ok)throw new Error("Analysis not found or not public");const l=await a.json();N(l)}catch(a){console.error("Failed to load analysis:",a),g(a instanceof Error?a.message:"Failed to load analysis")}finally{j(!1)}},w=()=>{navigator.clipboard.writeText(window.location.href),v({title:"Link copied to clipboard!"})},_=()=>{if(!s)return;const a=JSON.stringify(s,null,2),l=new Blob([a],{type:"application/json"}),x=URL.createObjectURL(l),r=document.createElement("a");r.href=x,r.download=`${s.title?.replace(/\s+/g,"_")||"analysis"}_Content_Analysis.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(x)};return y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsx(t,{className:"w-full max-w-md",children:e.jsx(n,{className:"p-6 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading analysis..."})})})}):p||!s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsx(t,{className:"w-full max-w-md",children:e.jsxs(n,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-destructive mb-4",children:p||"Analysis not found"}),e.jsxs(h,{onClick:()=>window.location.href="/",variant:"outline",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Go Home"]})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs(t,{children:[e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(i,{variant:"secondary",children:[e.jsx(L,{className:"mr-1 h-3 w-3"}),s.view_count," views"]}),s.is_social_media&&e.jsx(i,{variant:"outline",children:s.social_platform})]}),e.jsx(d,{className:"text-2xl",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.domain," â€¢ ",new Date(s.created_at).toLocaleDateString()]}),s.author&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["By ",s.author]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{onClick:w,variant:"outline",size:"sm",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Copy Link"]}),e.jsxs(h,{onClick:_,variant:"outline",size:"sm",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Export"]})]})]})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Summary"}),e.jsx("p",{className:"text-sm",children:s.summary})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Word Count: ",s.word_count.toLocaleString()]}),s.url&&e.jsx("div",{children:e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"View Original â†’"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.top_phrases&&s.top_phrases.length>0&&e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(d,{children:"Top Phrases"})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-2",children:s.top_phrases.slice(0,10).map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"flex-1",children:a.phrase}),e.jsxs(i,{variant:"outline",children:[a.count,"Ã—"]})]},l))})})]}),s.keyphrases&&s.keyphrases.length>0&&e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(d,{children:"Key Phrases"})}),e.jsx(n,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.keyphrases.slice(0,15).map((a,l)=>e.jsx(i,{variant:"secondary",children:a.phrase},l))})})]}),s.entities&&e.jsxs(t,{className:"md:col-span-2",children:[e.jsx(c,{children:e.jsx(d,{children:"Key Entities"})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.entities.people&&s.entities.people.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2",children:["ðŸ‘¤ People (",s.entities.people.length,")"]}),e.jsx("div",{className:"space-y-1",children:s.entities.people.slice(0,8).map((a,l)=>e.jsxs("div",{className:"text-sm flex items-center justify-between",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",a.count,"Ã—)"]})]},l))})]}),s.entities.organizations&&s.entities.organizations.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2",children:["ðŸ¢ Organizations (",s.entities.organizations.length,")"]}),e.jsx("div",{className:"space-y-1",children:s.entities.organizations.slice(0,8).map((a,l)=>e.jsxs("div",{className:"text-sm flex items-center justify-between",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",a.count,"Ã—)"]})]},l))})]}),s.entities.locations&&s.entities.locations.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2",children:["ðŸ“ Locations (",s.entities.locations.length,")"]}),e.jsx("div",{className:"space-y-1",children:s.entities.locations.slice(0,8).map((a,l)=>e.jsxs("div",{className:"text-sm flex items-center justify-between",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",a.count,"Ã—)"]})]},l))})]}),s.entities.dates&&s.entities.dates.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2",children:["ðŸ“… Dates (",s.entities.dates.length,")"]}),e.jsx("div",{className:"space-y-1",children:s.entities.dates.slice(0,8).map((a,l)=>e.jsxs("div",{className:"text-sm flex items-center justify-between",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",a.count,"Ã—)"]})]},l))})]}),s.entities.money&&s.entities.money.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2",children:["ðŸ’° Money (",s.entities.money.length,")"]}),e.jsx("div",{className:"space-y-1",children:s.entities.money.slice(0,8).map((a,l)=>e.jsxs("div",{className:"text-sm flex items-center justify-between",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",a.count,"Ã—)"]})]},l))})]}),s.entities.emails&&s.entities.emails.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-1",children:[e.jsx(z,{className:"h-4 w-4"}),"Emails (",s.entities.emails.length,")"]}),e.jsx("div",{className:"space-y-1",children:s.entities.emails.slice(0,5).map((a,l)=>e.jsx("div",{className:"text-sm",children:e.jsxs("a",{href:`mailto:${a.email}`,className:"text-blue-600 hover:underline flex items-center justify-between",children:[e.jsx("span",{className:"truncate",children:a.email}),e.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",a.count,"Ã—)"]})]})},l))})]})]})})]}),s.sentiment_analysis&&e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(d,{children:"Sentiment Analysis"})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Overall Sentiment:"}),e.jsx(i,{children:s.sentiment_analysis.overall})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Score:"}),e.jsx("span",{className:"text-sm font-semibold",children:s.sentiment_analysis.score.toFixed(2)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Confidence:"}),e.jsxs("span",{className:"text-sm font-semibold",children:[(s.sentiment_analysis.confidence*100).toFixed(0),"%"]})]})]})})]}),s.topics&&s.topics.length>0&&e.jsxs(t,{className:"md:col-span-2",children:[e.jsx(c,{children:e.jsx(d,{children:"Topics"})}),e.jsx(n,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.topics.map((a,l)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold text-sm",children:a.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[(a.coverage*100).toFixed(0),"%"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.keywords.slice(0,5).map((x,r)=>e.jsx(i,{variant:"secondary",className:"text-xs",children:x},r))})]},l))})})]}),s.claim_analysis?.claims&&s.claim_analysis.claims.length>0&&e.jsxs(t,{className:"md:col-span-2",children:[e.jsx(c,{children:e.jsx(d,{children:"Claims Analysis"})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:s.claim_analysis.claims.map((a,l)=>e.jsx("div",{className:"border-l-4 border-blue-500 pl-4 space-y-2",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("p",{className:"text-sm flex-1",children:a.claim}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:a.category}),e.jsx(i,{variant:a.deception_analysis.overall_risk==="high"?"destructive":a.deception_analysis.overall_risk==="medium"?"default":"secondary",children:a.deception_analysis.overall_risk})]})]})},l))})})]}),s.links_analysis&&s.links_analysis.length>0&&e.jsxs(t,{className:"md:col-span-2",children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Link Analysis (",s.links_analysis.length," unique links)"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All links found in the article body (excluding navigation, headers, and footers)"})]}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Links"}),e.jsx("p",{className:"text-2xl font-bold",children:s.links_analysis.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"External"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.links_analysis.filter(a=>a.is_external).length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Internal"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.links_analysis.filter(a=>!a.is_external).length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Unique Domains"}),e.jsx("p",{className:"text-2xl font-bold",children:new Set(s.links_analysis.map(a=>a.domain)).size})]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.links_analysis.map((a,l)=>e.jsx("div",{className:"border-l-4 border-blue-500 pl-4 py-2 hover:bg-gray-50 transition-colors",children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm font-medium break-all flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3 flex-shrink-0"}),a.url]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e.jsx(i,{variant:"outline",className:"text-xs",children:a.domain}),e.jsx(i,{variant:a.is_external?"default":"secondary",className:"text-xs",children:a.is_external?"External":"Internal"}),e.jsxs("span",{className:"text-xs text-gray-600",children:["Referenced ",a.count,"Ã— in article"]})]}),a.anchor_text&&a.anchor_text.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Anchor text: "}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.anchor_text.map((x,r)=>e.jsxs(i,{variant:"outline",className:"text-xs",children:['"',x,'"']},r))})]})]})})},l))})]})})]}),(s.archive_urls||s.bypass_urls)&&e.jsxs(t,{className:"md:col-span-2",children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Archive & Bypass Links"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Alternative ways to access this content"})]}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.archive_urls&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Archive Services"}),s.archive_urls.wayback&&e.jsxs("a",{href:s.archive_urls.wayback,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-blue-600 hover:underline",children:[e.jsx(f,{className:"h-4 w-4"}),"Wayback Machine"]}),s.archive_urls.archive_is&&e.jsxs("a",{href:s.archive_urls.archive_is,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-blue-600 hover:underline",children:[e.jsx(f,{className:"h-4 w-4"}),"Archive.is"]})]}),s.bypass_urls&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Paywall Bypass"}),s.bypass_urls["12ft"]&&e.jsxs("a",{href:s.bypass_urls["12ft"],target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-blue-600 hover:underline",children:[e.jsx(u,{className:"h-4 w-4"}),"12ft Ladder"]})]})]})})]})]}),e.jsx(t,{children:e.jsxs(n,{className:"p-4 text-center text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Shared via Research Tools â€¢ Analysis performed"," ",new Date(s.created_at).toLocaleDateString()]}),e.jsx("p",{className:"mt-2",children:e.jsx("a",{href:"/",className:"text-blue-600 hover:underline",children:"Create your own analysis â†’"})})]})})]})})}export{G as PublicContentAnalysisPage};
