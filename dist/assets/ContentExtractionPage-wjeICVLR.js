import{j as e}from"./ui-vendor-DBphXmDA.js";import{r as o,f as M}from"./react-vendor-CfYLSWvh.js";import{B as d,A as F,r as U,u as $,I as B,q as X}from"./index-QqleixXe.js";import{C as L,a as S,b as A,c as O,d as P}from"./card-BGAig-Dv.js";import{T as _,a as I,b as E,c as C}from"./tabs-If3dmLWi.js";import{av as K,X as H,C as R,d as D,_ as J,G as q,h as G,P as V,a1 as z}from"./icons-x9tcvtYN.js";import"./state-vendor-BXB5jEEt.js";const Y=["application/pdf","text/html","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"],Z=10;function Q({onFileSelected:j,progress:a,maxSizeMB:x=Z,acceptedFileTypes:n=Y}){const[s,g]=o.useState(!1),[c,f]=o.useState(null),[h,u]=o.useState(null),p=t=>{const i=x*1024*1024;if(t.size>i)return`File size exceeds ${x}MB limit`;if(!n.includes(t.type)&&t.type!==""){const b=t.name.split(".").pop()?.toLowerCase();if(!b||!["pdf","html","htm","txt","docx","doc"].includes(b))return"File type not supported. Accepted types: PDF, HTML, TXT, DOCX"}return null},m=o.useCallback(t=>{u(null);const i=p(t);if(i){u(i);return}f(t),j(t)},[j]),y=o.useCallback(t=>{t.preventDefault(),t.stopPropagation(),t.type==="dragenter"||t.type==="dragover"?g(!0):t.type==="dragleave"&&g(!1)},[]),N=o.useCallback(t=>{t.preventDefault(),t.stopPropagation(),g(!1),t.dataTransfer.files&&t.dataTransfer.files[0]&&m(t.dataTransfer.files[0])},[m]),v=o.useCallback(t=>{t.preventDefault(),t.target.files&&t.target.files[0]&&m(t.target.files[0])},[m]),k=()=>{f(null),u(null)},w=t=>{if(t===0)return"0 Bytes";const i=1024,b=["Bytes","KB","MB"],T=Math.floor(Math.log(t)/Math.log(i));return Math.round(t/Math.pow(i,T)*100)/100+" "+b[T]},r=t=>(t.split(".").pop()?.toLowerCase(),e.jsx(D,{className:"h-6 w-6 text-blue-600"})),l=a&&a.status!=="idle"&&a.status!=="complete"&&a.status!=="error";return e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${s?"border-blue-600 bg-blue-50 dark:bg-blue-900/10":"border-gray-300 dark:border-gray-700 hover:border-gray-400 dark:hover:border-gray-600"} ${l?"opacity-50 pointer-events-none":""}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:N,children:[e.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:v,accept:n.join(","),disabled:l}),c?e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r(c.name),e.jsxs("div",{className:"text-left flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:c.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:w(c.size)})]})]}),!l&&e.jsx(d,{variant:"ghost",size:"sm",onClick:k,className:"ml-2",children:e.jsx(H,{className:"h-4 w-4"})})]}):e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(K,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Drop files here or click to browse"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Supported formats: PDF, HTML, TXT, DOCX (Max ",x,"MB)"]})]})]}),a&&a.status!=="idle"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:a.message||"Processing..."}),e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[a.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${a.progress}%`}})})]}),h&&e.jsxs(F,{variant:"destructive",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx(U,{children:h})]}),a?.status==="error"&&a.message&&e.jsxs(F,{variant:"destructive",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx(U,{children:a.message})]})]})}function ne(){const j=M(),{t:a}=$(),[x,n]=o.useState({status:"idle",progress:0}),[s,g]=o.useState(null),[c,f]=o.useState(""),[h,u]=o.useState(!1),[p,m]=o.useState("file"),y=async r=>{n({status:"uploading",progress:10,message:"Uploading file..."});try{const l=new FormData;l.append("file",r),n({status:"processing",progress:30,message:"Extracting content..."});const t=await fetch("/api/tools/extract",{method:"POST",body:l});if(!t.ok)throw new Error(`Extraction failed: ${t.statusText}`);n({status:"analyzing",progress:70,message:"Analyzing text..."});const i=await t.json();n({status:"complete",progress:100,message:"Complete!"}),g(i)}catch(l){console.error("Extraction error:",l),n({status:"error",progress:0,message:l instanceof Error?l.message:"Failed to extract content"})}},N=async()=>{if(c.trim()){n({status:"processing",progress:20,message:"Fetching URL..."});try{const r=await fetch("/api/tools/extract",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:c})});if(!r.ok)throw new Error(`Extraction failed: ${r.statusText}`);n({status:"analyzing",progress:70,message:"Analyzing content..."});const l=await r.json();n({status:"complete",progress:100,message:"Complete!"}),g(l)}catch(r){console.error("URL extraction error:",r),n({status:"error",progress:0,message:r instanceof Error?r.message:"Failed to extract content from URL"})}}},v=async()=>{if(s)try{await navigator.clipboard.writeText(s.content.text),u(!0),setTimeout(()=>u(!1),2e3)}catch(r){console.error("Failed to copy:",r)}},k=()=>{if(!s)return;const r=new Blob([s.content.text],{type:"text/plain"}),l=URL.createObjectURL(r),t=document.createElement("a");t.href=l,t.download=`extraction-${s.id}.txt`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(l)},w=()=>{if(!s)return;const r=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),l=URL.createObjectURL(r),t=document.createElement("a");t.href=l,t.download=`extraction-${s.id}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(l)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(d,{variant:"outline",onClick:()=>j("/dashboard/tools"),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),a("contentExtractionTool.backToTools")]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a("contentExtractionTool.title")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a("contentExtractionTool.subtitle")})]})]})})]}),e.jsxs(L,{children:[e.jsxs(S,{children:[e.jsx(A,{children:a("contentExtractionTool.uploadOrEnterUrl")}),e.jsx(O,{children:a("contentExtractionTool.uploadOrEnterUrlDesc")})]}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs(d,{variant:p==="file"?"default":"outline",onClick:()=>m("file"),className:"flex-1",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),a("contentExtractionTool.fileUpload")]}),e.jsxs(d,{variant:p==="url"?"default":"outline",onClick:()=>m("url"),className:"flex-1",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),a("contentExtractionTool.url")]})]}),p==="file"?e.jsx(Q,{onFileSelected:y,progress:x}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{type:"url",placeholder:a("contentExtractionTool.urlPlaceholder"),value:c,onChange:r=>f(r.target.value),disabled:x.status==="processing"}),e.jsx(d,{onClick:N,disabled:!c.trim()||x.status==="processing",className:"w-full",children:a("contentExtractionTool.extractFromUrl")})]})]})]}),s&&e.jsxs(L,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(A,{children:a("contentExtractionTool.extractionResults")}),e.jsxs(O,{children:[s.content.wordCount," ",a("contentExtractionTool.words")," • ",s.content.charCount," ",a("contentExtractionTool.characters"),s.content.pages&&` • ${s.content.pages} ${a("contentExtractionTool.pages")}`]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:v,children:[h?e.jsx(G,{className:"h-4 w-4 mr-2"}):e.jsx(V,{className:"h-4 w-4 mr-2"}),a(h?"contentExtractionTool.copied":"contentExtractionTool.copy")]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:k,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),a("contentExtractionTool.txt")]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:w,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),a("contentExtractionTool.json")]})]})]})}),e.jsx(P,{children:e.jsxs(_,{defaultValue:"text",children:[e.jsxs(I,{className:"grid w-full grid-cols-3",children:[e.jsx(E,{value:"text",children:a("contentExtractionTool.text")}),e.jsx(E,{value:"metadata",children:a("contentExtractionTool.metadata")}),e.jsx(E,{value:"analysis",children:a("contentExtractionTool.analysis")})]}),e.jsx(C,{value:"text",className:"space-y-4",children:e.jsx(X,{value:s.content.text,readOnly:!0,className:"min-h-[400px] font-mono text-sm"})}),e.jsx(C,{value:"metadata",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.metadata.title&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a("contentExtractionTool.title")}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:s.metadata.title})]}),s.metadata.author&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a("contentExtractionTool.author")}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:s.metadata.author})]}),s.metadata.date&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a("contentExtractionTool.date")}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:s.metadata.date})]}),s.metadata.language&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a("contentExtractionTool.language")}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:s.metadata.language})]}),s.metadata.keywords&&s.metadata.keywords.length>0&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a("contentExtractionTool.keywords")}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:s.metadata.keywords.map((r,l)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-xs rounded-full",children:r},l))})]})]})}),e.jsx(C,{value:"analysis",className:"space-y-4",children:s.analysis?e.jsxs("div",{className:"space-y-4",children:[s.analysis.readability&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("contentExtractionTool.readability")}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:a("contentExtractionTool.fleschKincaid")}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:s.analysis.readability.fleschKincaid.toFixed(1)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:a("contentExtractionTool.gradeLevel")}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:s.analysis.readability.grade})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:a("contentExtractionTool.difficulty")}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 capitalize",children:s.analysis.readability.difficulty.replace("-"," ")})]})]})]}),s.analysis.keywords&&s.analysis.keywords.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("contentExtractionTool.topKeywords")}),e.jsx("div",{className:"space-y-2",children:s.analysis.keywords.slice(0,10).map((r,l)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 w-32 truncate",children:r.word}),e.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${r.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 w-16 text-right",children:[r.frequency,"×"]})]},l))})]})]}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a("contentExtractionTool.noAnalysisData")})})]})})]})]})}export{ne as ContentExtractionPage};
