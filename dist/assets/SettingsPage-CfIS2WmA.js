import{j as e,K as Oe,l as xs,g as ps,M as Fe,W as us,N as js,h as gs,Q as fs,U as ys,k as Ns,D as bs,i as Ie,O as vs,m as ws}from"./ui-vendor-DBphXmDA.js";import{r as t}from"./react-vendor-CfYLSWvh.js";import{T as ks,a as Cs,b as X,c as q}from"./tabs-If3dmLWi.js";import{C as b,a as C,b as S,c as D,d as v}from"./card-BGAig-Dv.js";import{K as Ss,y as g,S as U,z as $,C as H,E as G,F as k,t as M,M as Le,l as fe,H as Ds,B as E,m as ye,n as Ne,o as be,p as ve,I as ee,q as _s,s as we,e as V,u as As,v as Ts}from"./index-QqleixXe.js";import{S as z}from"./switch-BxNvahPI.js";import{R as Es,a as se}from"./radio-group-Dj8G6QwH.js";import{j as ke,k as Os,bk as Pe,bl as Fs,bm as Is,S as ce,W as Ls,U as ae,Q as Ps,q as ie,P as Rs,aO as Ms,G as Ce,n as Se,C as oe,Z as Ws,w as Us,bn as $s,a1 as De,av as _e,ax as Hs,J as Ae,c as Gs,T as Bs,f as Vs,bo as zs,D as Js}from"./icons-x9tcvtYN.js";import{S as te}from"./slider-B52ikc1m.js";import{C as Te}from"./checkbox-DueJeeKx.js";import"./state-vendor-BXB5jEEt.js";const Xs={theme:"system",language:"en",density:"comfortable",sidebar_behavior:"auto_collapse",font_size:"medium",show_tooltips:!0,animation_enabled:!0},qs={default_model:"gpt-5-mini",temperature:.7,max_tokens:2048,show_cost_tracking:!0,show_token_usage:!0,auto_suggestions:!0,context_window:4096},Ys={email_enabled:!1,desktop_enabled:!0,analysis_complete:!0,export_ready:!0,workspace_invite:!0},Ks={default_workspace_id:"1",auto_save_enabled:!0,auto_save_interval:30,show_recent_items:!0,recent_items_limit:10},Y={display:Xs,ai:qs,notifications:Ys,workspace:Ks},Re="settings_";function re(){return localStorage.getItem("omnicore_user_hash")}function le(s){return{"Content-Type":"application/json","X-User-Hash":s}}function Ee(s){try{const a=`${Re}${s}`,r=localStorage.getItem(a);if(!r)return null;const c=JSON.parse(r);return{user_hash:s,...c}}catch(a){return console.error("Failed to load settings from localStorage:",a),null}}function ne(s){try{const a=`${Re}${s.user_hash}`,{user_hash:r,...c}=s;localStorage.setItem(a,JSON.stringify(c))}catch(a){console.error("Failed to save settings to localStorage:",a)}}function Zs(){const[s,a]=t.useState(null),[r,c]=t.useState(!0),[m,i]=t.useState(null),h=t.useCallback(async()=>{const l=re();if(!l){a(null),c(!1);return}try{c(!0),i(null);const x=await fetch("/api/settings/user",{headers:le(l)});if(x.ok){const p=await x.json();a(p),ne(p)}else if(x.status===404){const p=Ee(l);if(p)a(p);else{const N={user_hash:l,display:Y.display,ai:Y.ai,notifications:Y.notifications,workspace:Y.workspace};a(N),ne(N)}}else throw new Error("Failed to load settings")}catch(x){console.error("Settings load error:",x),i(x instanceof Error?x.message:"Failed to load settings");const p=Ee(l);p&&a(p)}finally{c(!1)}},[]),o=t.useCallback(async(l,x)=>{const p=re();if(!(!p||!s))try{const N=s[l],L={...s,[l]:{...typeof N=="object"&&N!==null?N:{},...x}};if(a(L),ne(L),!(await fetch("/api/settings/user",{method:"PUT",headers:le(p),body:JSON.stringify({[l]:L[l]})})).ok)throw new Error("Failed to update settings");await h()}catch(N){throw console.error("Settings update error:",N),i(N instanceof Error?N.message:"Failed to update settings"),await h(),N}},[s,h]),_=t.useCallback(async l=>{await o("display",l)},[o]),A=t.useCallback(async l=>{await o("ai",l)},[o]),y=t.useCallback(async l=>{await o("notifications",l)},[o]),O=t.useCallback(async l=>{await o("workspace",l)},[o]),F=t.useCallback(async()=>{const l=re();if(l)try{if(!(await fetch("/api/settings/user",{method:"DELETE",headers:le(l)})).ok)throw new Error("Failed to reset settings");await h()}catch(x){throw console.error("Settings reset error:",x),i(x instanceof Error?x.message:"Failed to reset settings"),x}},[h]),T=t.useCallback(async()=>{await h()},[h]);return t.useEffect(()=>{h()},[h]),{settings:s,loading:r,error:m,updateDisplaySettings:_,updateAISettings:A,updateNotificationSettings:y,updateWorkspaceSettings:O,resetSettings:F,refreshSettings:T}}function Qs({settings:s,onUpdate:a,updating:r=!1}){const c=t.useCallback(async i=>{if(await a({theme:i}),i==="dark")document.documentElement.classList.add("dark");else if(i==="light")document.documentElement.classList.remove("dark");else{const h=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",h)}},[a]),m=t.useCallback(async i=>{await a({language:i}),await Ss.changeLanguage(i),document.documentElement.lang=i},[a]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Theme"]}),e.jsx(D,{children:"Choose your preferred color scheme"})]}),e.jsx(v,{children:e.jsxs(Es,{value:s.theme,onValueChange:i=>c(i),className:"grid grid-cols-3 gap-4",disabled:r,children:[e.jsxs("div",{children:[e.jsx(se,{value:"light",id:"theme-light",className:"peer sr-only"}),e.jsxs(g,{htmlFor:"theme-light",className:"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[e.jsx(ke,{className:"mb-3 h-6 w-6"}),"Light"]})]}),e.jsxs("div",{children:[e.jsx(se,{value:"dark",id:"theme-dark",className:"peer sr-only"}),e.jsxs(g,{htmlFor:"theme-dark",className:"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[e.jsx(Os,{className:"mb-3 h-6 w-6"}),"Dark"]})]}),e.jsxs("div",{children:[e.jsx(se,{value:"system",id:"theme-system",className:"peer sr-only"}),e.jsxs(g,{htmlFor:"theme-system",className:"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[e.jsx(Pe,{className:"mb-3 h-6 w-6"}),"System"]})]})]})})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsx(S,{className:"flex items-center gap-2",children:"Language"}),e.jsx(D,{children:"Choose your preferred language"})]}),e.jsx(v,{children:e.jsxs(U,{value:s.language,onValueChange:i=>m(i),disabled:r,children:[e.jsx($,{children:e.jsx(H,{})}),e.jsxs(G,{children:[e.jsx(k,{value:"en",children:"English"}),e.jsx(k,{value:"es",children:"EspaÃ±ol"})]})]})})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"h-5 w-5"}),"Density"]}),e.jsx(D,{children:"Adjust spacing and component sizing"})]}),e.jsx(v,{children:e.jsxs(U,{value:s.density,onValueChange:i=>a({density:i}),disabled:r,children:[e.jsx($,{children:e.jsx(H,{})}),e.jsxs(G,{children:[e.jsx(k,{value:"compact",children:"Compact - More content, less spacing"}),e.jsx(k,{value:"comfortable",children:"Comfortable - Balanced (Recommended)"}),e.jsx(k,{value:"spacious",children:"Spacious - More whitespace, easier reading"})]})]})})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsx(S,{children:"Sidebar Behavior"}),e.jsx(D,{children:"How the sidebar should behave on smaller screens"})]}),e.jsx(v,{children:e.jsxs(U,{value:s.sidebar_behavior,onValueChange:i=>a({sidebar_behavior:i}),disabled:r,children:[e.jsx($,{children:e.jsx(H,{})}),e.jsxs(G,{children:[e.jsx(k,{value:"always_open",children:"Always Open - Sidebar stays visible"}),e.jsx(k,{value:"auto_collapse",children:"Auto Collapse - Collapse on mobile (Recommended)"}),e.jsx(k,{value:"manual",children:"Manual - You control open/close"})]})]})})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5"}),"Font Size"]}),e.jsx(D,{children:"Adjust text size for better readability"})]}),e.jsx(v,{children:e.jsxs(U,{value:s.font_size,onValueChange:i=>a({font_size:i}),disabled:r,children:[e.jsx($,{children:e.jsx(H,{})}),e.jsxs(G,{children:[e.jsx(k,{value:"small",children:"Small - 14px"}),e.jsx(k,{value:"medium",children:"Medium - 16px (Default)"}),e.jsx(k,{value:"large",children:"Large - 18px"}),e.jsx(k,{value:"x-large",children:"Extra Large - 20px"})]})]})})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"UI Enhancements"]}),e.jsx(D,{children:"Toggle visual enhancements and effects"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(g,{htmlFor:"tooltips",children:"Tooltips"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Show helpful tooltips on hover"})]}),e.jsx(z,{id:"tooltips",checked:s.show_tooltips,onCheckedChange:i=>a({show_tooltips:i}),disabled:r})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(g,{htmlFor:"animations",children:"Animations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable smooth transitions and effects"})]}),e.jsx(z,{id:"animations",checked:s.animation_enabled,onCheckedChange:i=>a({animation_enabled:i}),disabled:r})]})]})]})]})}var Me="AlertDialog",[ea]=js(Me,[Oe]),P=Oe(),We=s=>{const{__scopeAlertDialog:a,...r}=s,c=P(a);return e.jsx(xs,{...c,...r,modal:!0})};We.displayName=Me;var sa="AlertDialogTrigger",aa=t.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...c}=s,m=P(r);return e.jsx(ws,{...m,...c,ref:a})});aa.displayName=sa;var ta="AlertDialogPortal",Ue=s=>{const{__scopeAlertDialog:a,...r}=s,c=P(a);return e.jsx(ps,{...c,...r})};Ue.displayName=ta;var ra="AlertDialogOverlay",$e=t.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...c}=s,m=P(r);return e.jsx(vs,{...m,...c,ref:a})});$e.displayName=ra;var B="AlertDialogContent",[la,na]=ea(B),ia=ys("AlertDialogContent"),He=t.forwardRef((s,a)=>{const{__scopeAlertDialog:r,children:c,...m}=s,i=P(r),h=t.useRef(null),o=Fe(a,h),_=t.useRef(null);return e.jsx(us,{contentName:B,titleName:Ge,docsSlug:"alert-dialog",children:e.jsx(la,{scope:r,cancelRef:_,children:e.jsxs(gs,{role:"alertdialog",...i,...m,ref:o,onOpenAutoFocus:fs(m.onOpenAutoFocus,A=>{A.preventDefault(),_.current?.focus({preventScroll:!0})}),onPointerDownOutside:A=>A.preventDefault(),onInteractOutside:A=>A.preventDefault(),children:[e.jsx(ia,{children:c}),e.jsx(ca,{contentRef:h})]})})})});He.displayName=B;var Ge="AlertDialogTitle",Be=t.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...c}=s,m=P(r);return e.jsx(Ns,{...m,...c,ref:a})});Be.displayName=Ge;var Ve="AlertDialogDescription",ze=t.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...c}=s,m=P(r);return e.jsx(bs,{...m,...c,ref:a})});ze.displayName=Ve;var oa="AlertDialogAction",Je=t.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...c}=s,m=P(r);return e.jsx(Ie,{...m,...c,ref:a})});Je.displayName=oa;var Xe="AlertDialogCancel",qe=t.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...c}=s,{cancelRef:m}=na(Xe,r),i=P(r),h=Fe(a,m);return e.jsx(Ie,{...i,...c,ref:h})});qe.displayName=Xe;var ca=({contentRef:s})=>{const a=`\`${B}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${B}\` by passing a \`${Ve}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${B}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return t.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},da=We,ma=Ue,Ye=$e,Ke=He,Ze=Je,Qe=qe,es=Be,ss=ze;const as=da,ha=ma,ts=t.forwardRef(({className:s,...a},r)=>e.jsx(Ye,{className:M("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:r}));ts.displayName=Ye.displayName;const de=t.forwardRef(({className:s,...a},r)=>e.jsxs(ha,{children:[e.jsx(ts,{}),e.jsx(Ke,{ref:r,className:M("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));de.displayName=Ke.displayName;const me=({className:s,...a})=>e.jsx("div",{className:M("flex flex-col space-y-2 text-center sm:text-left",s),...a});me.displayName="AlertDialogHeader";const he=({className:s,...a})=>e.jsx("div",{className:M("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});he.displayName="AlertDialogFooter";const xe=t.forwardRef(({className:s,...a},r)=>e.jsx(es,{ref:r,className:M("text-lg font-semibold",s),...a}));xe.displayName=es.displayName;const pe=t.forwardRef(({className:s,...a},r)=>e.jsx(ss,{ref:r,className:M("text-sm text-muted-foreground",s),...a}));pe.displayName=ss.displayName;const ue=t.forwardRef(({className:s,...a},r)=>e.jsx(Ze,{ref:r,className:M(Le(),s),...a}));ue.displayName=Ze.displayName;const je=t.forwardRef(({className:s,...a},r)=>e.jsx(Qe,{ref:r,className:M(Le({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));je.displayName=Qe.displayName;function xa({workspaces:s,currentWorkspaceId:a,onWorkspaceChange:r,onWorkspaceCreate:c,onWorkspaceDelete:m,onWorkspaceUpdate:i}){const[h,o]=t.useState(!1),[_,A]=t.useState(!1),[y,O]=t.useState(!1),[F,T]=t.useState(!1),[l,x]=t.useState(null),[p,N]=t.useState(""),[L,W]=t.useState("PERSONAL"),[u,I]=t.useState(""),[d,j]=t.useState(!1),[w,f]=t.useState(!1),[R,J]=t.useState(""),[Z,rs]=t.useState(""),[ls,ge]=t.useState(!1),ns=t.useCallback(async()=>{if(p.trim())try{j(!0),await c(p,L,u||void 0),N(""),I(""),W("PERSONAL"),o(!1)}catch(n){console.error("Failed to create workspace:",n)}finally{j(!1)}},[p,L,u,c]),is=t.useCallback(async()=>{if(l)try{f(!0),await m(l.id),O(!1),x(null)}catch(n){console.error("Failed to delete workspace:",n)}finally{f(!1)}},[l,m]),os=t.useCallback(n=>{x(n);const Q=`${window.location.origin}/workspace/join/${n.id}`;rs(Q),T(!0)},[]),cs=t.useCallback(()=>{navigator.clipboard.writeText(Z),ge(!0),setTimeout(()=>ge(!1),2e3)},[Z]),ds=t.useCallback(async()=>{if(!(!R.trim()||!l))try{console.log("Inviting hash:",R,"to workspace:",l.id),J("")}catch(n){console.error("Failed to invite user:",n)}},[R,l]),ms=(n,Q)=>Q?e.jsx(Ce,{className:"h-4 w-4"}):n==="TEAM"?e.jsx(ae,{className:"h-4 w-4"}):e.jsx(Se,{className:"h-4 w-4"}),hs=n=>{switch(n){case"PERSONAL":return"Personal";case"TEAM":return"Team";case"PUBLIC":return"Public";default:return n}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Your Workspaces"}),e.jsx(D,{children:"Manage and switch between your workspaces"})]}),e.jsxs(fe,{open:h,onOpenChange:o,children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{children:[e.jsx(Ls,{className:"h-4 w-4 mr-2"}),"New Workspace"]})}),e.jsxs(ye,{children:[e.jsxs(Ne,{children:[e.jsx(be,{children:"Create New Workspace"}),e.jsx(ve,{children:"Create a new workspace to organize your analyses"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"workspace-name",children:"Workspace Name"}),e.jsx(ee,{id:"workspace-name",placeholder:"e.g., Syria Analysis",value:p,onChange:n=>N(n.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"workspace-type",children:"Type"}),e.jsxs(U,{value:L,onValueChange:n=>W(n),children:[e.jsx($,{id:"workspace-type",children:e.jsx(H,{})}),e.jsxs(G,{children:[e.jsx(k,{value:"PERSONAL",children:"Personal - Just for you"}),e.jsx(k,{value:"TEAM",children:"Team - Invite collaborators"}),e.jsx(k,{value:"PUBLIC",children:"Public - Anyone can view"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"workspace-description",children:"Description (Optional)"}),e.jsx(_s,{id:"workspace-description",placeholder:"Brief description of this workspace's purpose",value:u,onChange:n=>I(n.target.value),rows:3})]})]}),e.jsxs(we,{children:[e.jsx(E,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(E,{onClick:ns,disabled:d||!p.trim(),children:d?"Creating...":"Create Workspace"})]})]})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-2",children:[s.map(n=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border transition-colors ${n.id===a?"border-primary bg-primary/5":"border-border hover:bg-accent"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10 text-primary",children:ms(n.type,n.is_public)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:n.name}),n.is_default&&e.jsx(V,{variant:"secondary",className:"text-xs",children:"Default"}),n.id===a&&e.jsx(V,{variant:"default",className:"text-xs",children:"Active"})]}),n.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(V,{variant:"outline",className:"text-xs",children:hs(n.type)}),n.member_count!==void 0&&n.member_count>1&&e.jsxs(V,{variant:"outline",className:"text-xs",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),n.member_count," members"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.id!==a&&e.jsx(E,{variant:"outline",size:"sm",onClick:()=>r(n.id),children:"Switch"}),(n.type==="TEAM"||n.type==="PUBLIC")&&n.role==="owner"&&e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>os(n),children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Share"]}),!n.is_default&&n.role==="owner"&&e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{x(n),O(!0)},children:e.jsx(ie,{className:"h-4 w-4 text-destructive"})})]})]},n.id)),s.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No workspaces yet. Create one to get started!"})})]})})]}),e.jsx(fe,{open:F,onOpenChange:T,children:e.jsxs(ye,{className:"max-w-2xl",children:[e.jsxs(Ne,{children:[e.jsxs(be,{children:["Share Workspace: ",l?.name]}),e.jsx(ve,{children:"Invite collaborators to join this workspace"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Share Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{value:Z,readOnly:!0,className:"font-mono text-sm"}),e.jsxs(E,{onClick:cs,variant:"outline",children:[e.jsx(Rs,{className:"h-4 w-4 mr-2"}),ls?"Copied!":"Copy"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Anyone with this link can request access to the workspace"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"invite-hash",children:"Invite by User Hash"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{id:"invite-hash",placeholder:"Enter 16-digit user hash",value:R,onChange:n=>J(n.target.value),maxLength:16}),e.jsxs(E,{onClick:ds,disabled:!R.trim(),children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Invite"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Directly invite a user by their account hash"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Workspace Visibility"}),e.jsx("div",{className:"flex items-center gap-4 p-3 border rounded-lg",children:l?.is_public?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Public"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Anyone can view this workspace's contents"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Private"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Only invited members can access this workspace"})]})]})})]}),l?.member_count&&l.member_count>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Current Members"}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsxs("span",{children:[l.member_count," member(s)"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Member management coming soon"})]})]})]}),e.jsx(we,{children:e.jsx(E,{variant:"outline",onClick:()=>T(!1),children:"Close"})})]})}),e.jsx(as,{open:y,onOpenChange:O,children:e.jsxs(de,{children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Delete Workspace?"}),e.jsxs(pe,{children:['This will permanently delete the workspace "',l?.name,'" and all its data. This action cannot be undone.']})]}),e.jsxs(he,{children:[e.jsx(je,{children:"Cancel"}),e.jsx(ue,{onClick:is,disabled:w,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:w?"Deleting...":"Delete Workspace"})]})]})})]})}const K={"gpt-5":{name:"GPT-5",description:"Most capable model for deep analysis and complex reasoning",cost:"Highest cost, best quality"},"gpt-5-mini":{name:"GPT-5 Mini",description:"Balanced performance and cost - ideal for most tasks",cost:"Medium cost, great quality"},"gpt-5-nano":{name:"GPT-5 Nano",description:"Fast and efficient for simple tasks and suggestions",cost:"Lowest cost, good quality"},"gpt-4o-mini":{name:"GPT-4o Mini",description:"Fallback model while GPT-5 is in development",cost:"Low cost, proven quality"}};function pa({settings:s,onUpdate:a,updating:r=!1}){const c=t.useCallback(async o=>{await a({default_model:o})},[a]),m=t.useCallback(async o=>{await a({temperature:o[0]})},[a]),i=t.useCallback(async o=>{await a({max_tokens:o[0]})},[a]),h=t.useCallback(async o=>{await a({context_window:o[0]})},[a]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"AI Model"]}),e.jsx(D,{children:"Choose the default AI model for analysis tasks"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs(U,{value:s.default_model,onValueChange:o=>c(o),disabled:r,children:[e.jsx($,{children:e.jsx(H,{})}),e.jsx(G,{children:Object.entries(K).map(([o,_])=>e.jsx(k,{value:o,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:_.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:_.description})]})},o))})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:K[s.default_model].name}),e.jsx(V,{variant:"secondary",className:"text-xs",children:K[s.default_model].cost})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:K[s.default_model].description})]}),s.default_model==="gpt-4o-mini"&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("p",{className:"font-medium",children:"Temporary Fallback Model"}),e.jsx("p",{className:"mt-1",children:"GPT-5 models are not yet available. Using GPT-4o Mini as fallback."})]})]})})]})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-5 w-5"}),"Model Parameters"]}),e.jsx(D,{children:"Fine-tune AI behavior and output characteristics"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{htmlFor:"temperature",children:"Temperature"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.temperature.toFixed(2)})]}),e.jsx(te,{id:"temperature",min:0,max:1,step:.05,value:[s.temperature],onValueChange:m,disabled:r,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lower values (0.0-0.3) are more focused and deterministic. Higher values (0.7-1.0) are more creative and varied."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{htmlFor:"max-tokens",children:"Max Tokens"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.max_tokens.toLocaleString()})]}),e.jsx(te,{id:"max-tokens",min:512,max:8192,step:256,value:[s.max_tokens],onValueChange:i,disabled:r,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum length of AI responses. Higher values allow longer outputs but cost more."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{htmlFor:"context-window",children:"Context Window"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.context_window.toLocaleString()})]}),e.jsx(te,{id:"context-window",min:2048,max:16384,step:1024,value:[s.context_window],onValueChange:h,disabled:r,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Amount of context the AI considers. Larger windows provide better understanding but use more tokens."})]})]})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsx(S,{children:"AI Features"}),e.jsx(D,{children:"Enable or disable specific AI capabilities"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(g,{htmlFor:"cost-tracking",children:"Cost Tracking"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display estimated costs for AI operations"})]}),e.jsx(z,{id:"cost-tracking",checked:s.show_cost_tracking,onCheckedChange:o=>a({show_cost_tracking:o}),disabled:r})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(g,{htmlFor:"token-usage",children:"Token Usage"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Show token consumption statistics"})]}),e.jsx(z,{id:"token-usage",checked:s.show_token_usage,onCheckedChange:o=>a({show_token_usage:o}),disabled:r})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(g,{htmlFor:"auto-suggestions",children:"Auto Suggestions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get AI-powered suggestions while typing"})]}),e.jsx(z,{id:"auto-suggestions",checked:s.auto_suggestions,onCheckedChange:o=>a({auto_suggestions:o}),disabled:r})]})]})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-5 w-5"}),"Usage Statistics"]}),e.jsx(D,{children:"Track your AI usage and costs"})]}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Today's Token Usage"}),e.jsxs("span",{className:"font-medium",children:["0 / ",s.max_tokens.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("span",{className:"text-sm flex items-center gap-2",children:[e.jsx($s,{className:"h-4 w-4"}),"Estimated Cost Today"]}),e.jsx("span",{className:"font-medium",children:"$0.00"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Usage statistics are calculated in real-time. Costs are estimates based on current pricing."})]})})]})]})}function ua({userHash:s,workspaceId:a}){const[r,c]=t.useState(!1),[m,i]=t.useState(!1),[h,o]=t.useState(!1),[_,A]=t.useState(!1),[y,O]=t.useState("full"),[F,T]=t.useState("json"),[l,x]=t.useState(!0),[p,N]=t.useState(!0),L=t.useCallback(async()=>{try{c(!0);const d=await fetch("/api/settings/data/export",{method:"POST",headers:{"Content-Type":"application/json","X-User-Hash":s},body:JSON.stringify({export_type:y,format:F,workspace_id:y==="workspace"?a:void 0,include_metadata:l,include_comments:p})});if(!d.ok)throw new Error("Export failed");const j=await d.blob(),w=window.URL.createObjectURL(j),f=document.createElement("a");f.href=w,f.download=`omnicore_export_${Date.now()}.${F}`,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(w),document.body.removeChild(f)}catch(d){console.error("Export error:",d),alert("Failed to export data. Please try again.")}finally{c(!1)}},[s,a,y,F,l,p]),W=t.useCallback(async d=>{const j=d.target.files?.[0];if(j)try{i(!0);const w=await j.text(),f=JSON.parse(w),R=await fetch("/api/settings/data/import",{method:"POST",headers:{"Content-Type":"application/json","X-User-Hash":s},body:JSON.stringify({data:f,options:{merge:!0,overwrite:!1,import_settings:!0,import_workspaces:!0,import_frameworks:!0,import_evidence:!0,import_analyses:!0}})});if(!R.ok)throw new Error("Import failed");const J=await R.json();alert(`Successfully imported: ${JSON.stringify(J.imported_count,null,2)}`),window.location.reload()}catch(w){console.error("Import error:",w),alert("Failed to import data. Please check the file format and try again.")}finally{i(!1),d.target.value=""}},[s]),u=t.useCallback(async()=>{try{if(A(!0),!(await fetch(`/api/settings/data/workspace/${a}`,{method:"DELETE",headers:{"X-User-Hash":s}})).ok)throw new Error("Failed to clear data");alert("Workspace data cleared successfully"),o(!1),window.location.reload()}catch(d){console.error("Clear data error:",d),alert("Failed to clear workspace data. Please try again.")}finally{A(!1)}},[s,a]),I=t.useCallback(async()=>{try{const d=await fetch("/api/settings/hash/backup",{method:"POST",headers:{"X-User-Hash":s}});if(!d.ok)throw new Error("Failed to generate backup");const j=await d.blob(),w=window.URL.createObjectURL(j),f=document.createElement("a");f.href=w,f.download=`omnicore_hash_backup_${Date.now()}.txt`,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(w),document.body.removeChild(f)}catch(d){console.error("Backup error:",d),alert("Failed to generate hash backup. Please try again.")}},[s]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-5 w-5"}),"Export Data"]}),e.jsx(D,{children:"Download your data in various formats for backup or migration"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Export Type"}),e.jsxs("select",{className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:y,onChange:d=>O(d.target.value),children:[e.jsx("option",{value:"full",children:"Full Export - Everything"}),e.jsx("option",{value:"workspace",children:"Current Workspace Only"}),e.jsx("option",{value:"settings",children:"Settings Only"}),e.jsx("option",{value:"frameworks",children:"Frameworks Only"}),e.jsx("option",{value:"evidence",children:"Evidence Only"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Format"}),e.jsxs("select",{className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:F,onChange:d=>T(d.target.value),children:[e.jsx("option",{value:"json",children:"JSON - Full fidelity"}),e.jsx("option",{value:"csv",children:"CSV - Tabular data"}),e.jsx("option",{value:"excel",children:"Excel - Spreadsheet"}),e.jsx("option",{value:"pdf",children:"PDF - Reports"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{id:"include-metadata",checked:l,onCheckedChange:d=>x(d)}),e.jsx("label",{htmlFor:"include-metadata",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Include metadata (timestamps, IDs, etc.)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{id:"include-comments",checked:p,onCheckedChange:d=>N(d)}),e.jsx("label",{htmlFor:"include-comments",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Include comments and annotations"})]})]})]}),e.jsxs(E,{onClick:L,disabled:r,className:"w-full",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),r?"Exporting...":"Export Data"]})]})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-5 w-5"}),"Import Data"]}),e.jsx(D,{children:"Import previously exported data or migrate from another account"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Hs,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-medium",children:"Import Instructions"}),e.jsxs("ul",{className:"mt-1 ml-4 list-disc space-y-1",children:[e.jsx("li",{children:"Only JSON exports are supported for import"}),e.jsx("li",{children:"Existing data will be merged (not overwritten)"}),e.jsx("li",{children:"Duplicate items will be skipped"})]})]})]})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".json",onChange:W,disabled:m,className:"hidden",id:"import-file"}),e.jsx(g,{htmlFor:"import-file",children:e.jsx(E,{asChild:!0,disabled:m,className:"w-full",children:e.jsxs("span",{children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),m?"Importing...":"Select File to Import"]})})})]})]})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5"}),"Hash Backup"]}),e.jsx(D,{children:"Download a backup of your account hash for recovery"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Gs,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-800 dark:text-amber-200",children:[e.jsx("p",{className:"font-medium",children:"Critical: Store Securely"}),e.jsx("p",{className:"mt-1",children:"Your account hash is the ONLY way to access your data. Store this backup in a secure location like a password manager. No recovery is possible if lost."})]})]})}),e.jsxs(E,{onClick:I,variant:"outline",className:"w-full",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Download Hash Backup"]})]})]}),e.jsxs(b,{className:"border-destructive/50",children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(ie,{className:"h-5 w-5"}),"Danger Zone"]}),e.jsx(D,{children:"Irreversible actions that permanently delete data"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-red-600 dark:text-red-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[e.jsx("p",{className:"font-medium",children:"Warning: Permanent Deletion"}),e.jsx("p",{className:"mt-1",children:"This will permanently delete ALL data in your current workspace. This action cannot be undone."})]})]})}),e.jsxs(E,{variant:"destructive",onClick:()=>o(!0),className:"w-full",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Clear Current Workspace"]})]})]}),e.jsx(as,{open:h,onOpenChange:o,children:e.jsxs(de,{children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Clear All Workspace Data?"}),e.jsxs(pe,{children:["This will permanently delete:",e.jsxs("ul",{className:"mt-2 ml-4 list-disc space-y-1",children:[e.jsx("li",{children:"All frameworks and analyses"}),e.jsx("li",{children:"All evidence and datasets"}),e.jsx("li",{children:"All comments and annotations"}),e.jsx("li",{children:"All reports and exports"})]}),e.jsx("p",{className:"mt-3 font-medium text-destructive",children:"This action cannot be undone. Make sure you have exported any data you want to keep."})]})]}),e.jsxs(he,{children:[e.jsx(je,{children:"Cancel"}),e.jsx(ue,{onClick:u,disabled:_,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:_?"Clearing...":"Yes, Delete Everything"})]})]})})]})}function Da(){const{t:s}=As(),[a,r]=t.useState("display"),[c,m]=t.useState(!1),{settings:i,loading:h,error:o,updateDisplaySettings:_,updateAISettings:A}=Zs(),{workspaces:y,currentWorkspaceId:O,setCurrentWorkspaceId:F,setWorkspaces:T}=Ts(),l=typeof window<"u"?localStorage.getItem("omnicore_user_hash"):null,x=t.useCallback(async(u,I,d)=>{if(l)try{const j=await fetch("/api/settings/workspaces",{method:"POST",headers:{"Content-Type":"application/json","X-User-Hash":l},body:JSON.stringify({name:u,type:I,description:d})});if(!j.ok)throw new Error("Failed to create workspace");const w=await j.json();T([...y,w])}catch(j){throw console.error("Create workspace error:",j),j}},[l,y,T]),p=t.useCallback(async u=>{if(l)try{if(!(await fetch(`/api/settings/workspaces/${u}`,{method:"DELETE",headers:{"X-User-Hash":l}})).ok)throw new Error("Failed to delete workspace");if(T(y.filter(d=>d.id!==u)),u===O&&y.length>0){const d=y.filter(j=>j.id!==u);d.length>0&&F(d[0].id)}}catch(I){throw console.error("Delete workspace error:",I),I}},[l,y,O,T,F]),N=t.useCallback(async(u,I,d)=>{if(l)try{const j=await fetch(`/api/settings/workspaces/${u}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Hash":l},body:JSON.stringify({name:I,description:d})});if(!j.ok)throw new Error("Failed to update workspace");const w=await j.json();T(y.map(f=>f.id===u?w:f))}catch(j){throw console.error("Update workspace error:",j),j}},[l,y,T]),L=t.useCallback(async u=>{try{m(!0),await _(u)}finally{m(!1)}},[_]),W=t.useCallback(async u=>{try{m(!0),await A(u)}finally{m(!1)}},[A]);return h?e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 dark:border-gray-700 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("pages.settings.loading")})]})})}):o?e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:e.jsx(b,{className:"border-red-200 bg-red-50 dark:bg-red-900/20",children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-200",children:[e.jsx(oe,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s("pages.settings.loadError")}),e.jsx("p",{className:"text-sm mt-1",children:o})]})]})})})}):l?e.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Vs,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s("pages.settings.title")})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("pages.settings.subtitle")})]}),e.jsxs(ks,{value:a,onValueChange:r,className:"space-y-6",children:[e.jsxs(Cs,{className:"grid grid-cols-2 lg:grid-cols-4 w-full lg:w-auto",children:[e.jsxs(X,{value:"display",className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:s("pages.settings.tabs.display")})]}),e.jsxs(X,{value:"workspaces",className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:s("pages.settings.tabs.workspaces")})]}),e.jsxs(X,{value:"ai",className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:s("pages.settings.tabs.ai")})]}),e.jsxs(X,{value:"data",className:"flex items-center gap-2",children:[e.jsx(Js,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:s("pages.settings.tabs.data")})]})]}),e.jsx(q,{value:"display",className:"space-y-6",children:i&&e.jsx(Qs,{settings:i.display,onUpdate:L,updating:c})}),e.jsx(q,{value:"workspaces",className:"space-y-6",children:e.jsx(xa,{workspaces:y.map(u=>({...u,user_hash:l||"",is_default:u.id==="1",created_at:new Date().toISOString(),role:u.role?.toLowerCase()||"owner"})),currentWorkspaceId:O,onWorkspaceChange:F,onWorkspaceCreate:x,onWorkspaceDelete:p,onWorkspaceUpdate:N})}),e.jsx(q,{value:"ai",className:"space-y-6",children:i&&e.jsx(pa,{settings:i.ai,onUpdate:W,updating:c})}),e.jsx(q,{value:"data",className:"space-y-6",children:e.jsx(ua,{userHash:l,workspaceId:O})})]})]}):e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:e.jsx(b,{className:"border-yellow-200 bg-yellow-50 dark:bg-yellow-900/20",children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800 dark:text-yellow-200",children:[e.jsx(oe,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s("pages.settings.noAccountHash")}),e.jsx("p",{className:"text-sm mt-1",children:s("pages.settings.noAccountHashDesc")})]})]})})})})}export{Da as SettingsPage};
