import{j as e}from"./ui-vendor-DBphXmDA.js";import{f as w,r as d,L as C}from"./react-vendor-CfYLSWvh.js";import{d as S,B as h}from"./index-DGGXJgUa.js";import{C as H,a as O,b as E,c as R,d as T}from"./card-BQo7RV_Z.js";import{g as u,f as A}from"./hash-auth-C-5ASbCe.js";import{O as p,C as y,h as b,P as I,Q as _,c as F,R as L}from"./icons-x9tcvtYN.js";import"./state-vendor-BXB5jEEt.js";function $(){const x=w(),{toast:n}=S(),[a,m]=d.useState(""),[i,o]=d.useState(!1),[j,c]=d.useState(!1),[g,G]=d.useState(""),[r,B]=d.useState(!1);d.useEffect(()=>{const t=u();m(t);try{const s=localStorage.getItem("omnicore_valid_hashes"),l=s?JSON.parse(s):[];l.includes(t)||(l.push(t),localStorage.setItem("omnicore_valid_hashes",JSON.stringify(l)),console.log("[Register] Hash added to valid hashes:",t.substring(0,8)+"..."))}catch(s){console.error("[Register] Failed to store hash in valid hashes:",s)}},[]);const f=async()=>{try{await navigator.clipboard.writeText(a),o(!0),n({title:"Copied!",description:"Hash copied to clipboard. Save it in your password manager now!"}),setTimeout(()=>o(!1),3e3)}catch{try{const s=document.createElement("textarea");s.value=a,s.style.position="fixed",s.style.left="-999999px",s.style.top="-999999px",document.body.appendChild(s),s.focus(),s.select();const l=document.execCommand("copy");if(document.body.removeChild(s),l)o(!0),n({title:"Copied!",description:"Hash copied to clipboard. Save it in your password manager now!"}),setTimeout(()=>o(!1),3e3);else throw new Error("Copy command failed")}catch(s){console.error("Failed to copy:",s),n({title:"Copy failed",description:"Please manually select and copy the hash above.",variant:"destructive"})}}},N=()=>{o(!1),c(!1);const t=u();m(t)},v=()=>{try{const t=JSON.parse(localStorage.getItem("omnicore_valid_hashes")||"[]");t.includes(a)||(t.push(a),localStorage.setItem("omnicore_valid_hashes",JSON.stringify(t))),localStorage.setItem("omnicore_user_hash",a),c(!0),setTimeout(()=>{x(`/login?hash=${a}`)},1500)}catch{c(!0),setTimeout(()=>{x("/login")},1500)}},k=A(a);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs(H,{className:"w-full max-w-md bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(O,{className:"text-center space-y-2",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center mb-4",children:e.jsx(p,{className:"h-6 w-6 text-white"})}),e.jsx(E,{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Generate Bookmark Code"}),e.jsx(R,{className:"text-gray-600 dark:text-gray-400",children:"Save your work and collaborate with this unique code"})]}),e.jsxs(T,{className:"space-y-6",children:[j?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:e.jsx(b,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Hash Saved!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Redirecting to access page..."})]})]}):e.jsxs(e.Fragment,{children:[g&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 p-3 rounded-md",children:[e.jsx(y,{className:"h-4 w-4"}),g]}),e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 border-2 border-red-500 dark:border-red-600 rounded-lg p-5 animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"animate-bounce",children:e.jsx(y,{className:"h-8 w-8 text-red-600 dark:text-red-400 flex-shrink-0"})}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-red-900 dark:text-red-100",children:"‚ö†Ô∏è CRITICAL: SAVE THIS CODE NOW"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-base text-red-800 dark:text-red-200 font-semibold",children:"This is your ONLY way to access your work."}),e.jsxs("p",{className:"text-base text-red-800 dark:text-red-200",children:[e.jsx("strong",{className:"text-red-900 dark:text-red-100",children:"NO RECOVERY POSSIBLE"})," if lost. Save in password manager ",e.jsx("strong",{children:"immediately"}),"."]})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your Bookmark Code"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:r?"Generating...":a?"Click COPY button below ‚Üí":"Ready to generate"})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 border-2 border-gray-300 dark:border-gray-600 rounded-md p-4 font-mono text-base break-all text-gray-900 dark:text-gray-100 min-h-[60px] flex items-center",children:r?"Generating secure hash from server...":a?k:"Failed to generate hash"})}),a&&e.jsx(h,{type:"button",onClick:f,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 text-base",size:"lg",children:i?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-5 w-5 mr-2 text-green-300"}),"Copied to Clipboard!"]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-5 w-5 mr-2"}),"Copy Hash to Clipboard"]})}),i&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 font-semibold text-center",children:["‚úì"," Hash copied! Now save it in your password manager before continuing."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:"What is this hash?"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(p,{className:"h-4 w-4 mt-0.5 text-blue-500"}),e.jsxs("span",{children:["A ",e.jsx("strong",{children:"bookmark"})," to return to your saved analyses"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_,{className:"h-4 w-4 mt-0.5 text-green-500"}),e.jsxs("span",{children:["A ",e.jsx("strong",{children:"collaboration key"})," to share reports with others"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(F,{className:"h-4 w-4 mt-0.5 text-purple-500"}),e.jsxs("span",{children:[e.jsx("strong",{children:"No personal data"})," required or stored"]})]})]})]}),e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium text-center",children:["üö´"," NO RECOVERY ‚Ä¢ LOST CODE = LOST WORK ‚Ä¢ SAVE THIS CODE"]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(h,{onClick:N,variant:"outline",disabled:r,className:"w-full border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:[e.jsx(L,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Generating...":"Generate New Hash"]}),e.jsx(h,{onClick:v,className:"w-full bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",disabled:!i||r||!a,children:i&&a?"I've Saved My Hash - Continue":r?"Generating Hash...":"Copy Hash First"})]})]}),e.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:["Already have a hash?"," ",e.jsx(C,{to:"/login",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Access Work"})]})]})]})})}export{$ as RegisterPage};
