import{a as c,l as m}from"./citation-library-DsFrzEV3.js";function l(t){switch(t){case"news_article":case"blog_post":case"social_media":return"website";case"official_document":case"report":case"leaked_document":case"memo":return"report";case"testimony":case"eyewitness":case"interview":case"expert_opinion":case"anonymous_source":return"report";case"video":case"audio":case"photo":return"website";default:return"website"}}function u(t){return!t||!t.trim()?[{firstName:"",lastName:"Unknown",middleName:""}]:t.split(/[,;]|\sand\s/i).map(a=>a.trim()).filter(a=>a.length>0).map(a=>{const e=a.split(/\s+/);return e.length===0?{firstName:"",lastName:"Unknown",middleName:""}:e.length===1?{firstName:"",lastName:e[0],middleName:""}:e.length===2?{firstName:e[0],lastName:e[1],middleName:""}:{firstName:e[0],middleName:e.slice(1,-1).join(" "),lastName:e[e.length-1]}})}function d(t){if(!t)return{};const s=t.match(/(\d{4})-(\d{2})-(\d{2})/);if(s)return{year:s[1],month:s[2],day:s[3]};const a=t.match(/(\d{4})/);return a?{year:a[1]}:{}}function y(t,s="apa"){const a=u(t.who),e=l(t.evidence_type),n=d(t.when_occurred),i={authors:a,title:t.title||"Untitled Evidence",...n,url:t.where_location,accessDate:new Date().toISOString().split("T")[0]};(t.evidence_type==="news_article"||t.evidence_type==="blog_post"||t.evidence_type==="social_media")&&(i.siteName=t.category||void 0),(t.evidence_type==="testimony"||t.evidence_type==="eyewitness"||t.evidence_type==="interview")&&(i.institution=t.category||void 0);const{citation:r,inTextCitation:o}=c(i,e,s);return{id:m(),citationStyle:s,sourceType:e,fields:i,citation:r,inTextCitation:o,addedAt:new Date().toISOString(),notes:`Generated from evidence: ${t.title}${t.what?`
Claim: ${t.what}`:""}`,tags:t.tags||[]}}export{y as e};
