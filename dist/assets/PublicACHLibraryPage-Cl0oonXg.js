import{j as e}from"./ui-vendor-DBphXmDA.js";import{f as k,r as t}from"./react-vendor-CfYLSWvh.js";import{I as L,S as p,z as u,C as j,E as y,F as i,e as d}from"./index-QqleixXe.js";import{C as x,d as h,a as E,b as H,c as F}from"./card-BGAig-Dv.js";import{a as P,bg as R,a5 as B,P as D,z as I}from"./icons-x9tcvtYN.js";import"./state-vendor-BXB5jEEt.js";const N={intelligence:"Research Analysis",security:"Security",business:"Business",research:"Scientific Research",medical:"Medical",legal:"Legal",other:"Other"};function V(){const b=k(),[f,v]=t.useState([]),[m,g]=t.useState(!0),[l,w]=t.useState(""),[r,C]=t.useState("all"),[n,S]=t.useState("recent");t.useEffect(()=>{A()},[r,n]);const A=async()=>{try{g(!0);const s=new URLSearchParams;r!=="all"&&s.append("domain",r),s.append("sort",n);const a=await fetch(`/api/ach/public?${s}`);if(!a.ok)throw new Error("Failed to load analyses");const o=await a.json();v(o.analyses||[])}catch(s){console.error("Failed to load public analyses:",s)}finally{g(!1)}},c=f.filter(s=>{if(!l)return!0;const a=l.toLowerCase();return s.title?.toLowerCase().includes(a)||s.question?.toLowerCase().includes(a)||s.description?.toLowerCase().includes(a)||s.tags?.some(o=>o.toLowerCase().includes(a))});return e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Public ACH Analyses"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Explore shared intelligence analyses using the Analysis of Competing Hypotheses methodology"})]}),e.jsx("div",{className:"mb-6 space-y-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(L,{placeholder:"Search analyses, questions, or tags...",value:l,onChange:s=>w(s.target.value),className:"pl-10"})]})}),e.jsxs(p,{value:r,onValueChange:s=>C(s),children:[e.jsxs(u,{className:"w-[180px]",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),e.jsx(j,{placeholder:"All Domains"})]}),e.jsxs(y,{children:[e.jsx(i,{value:"all",children:"All Domains"}),Object.entries(N).map(([s,a])=>e.jsx(i,{value:s,children:a},s))]})]}),e.jsxs(p,{value:n,onValueChange:s=>S(s),children:[e.jsx(u,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Sort by"})}),e.jsxs(y,{children:[e.jsx(i,{value:"recent",children:"Most Recent"}),e.jsx(i,{value:"popular",children:"Most Popular"})]})]})]})}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:m?"Loading...":`${c.length} ${c.length===1?"analysis":"analyses"} found`})}),m?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Loading public analyses..."})}):c.length===0?e.jsx(x,{children:e.jsxs(h,{className:"p-12 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Analyses Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l?"Try adjusting your search or filters":"No public ACH analyses have been shared yet"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>e.jsxs(x,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>b(`/public/ach/${s.share_token}`),children:[e.jsxs(E,{children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.domain&&e.jsx(d,{variant:"secondary",className:"text-xs",children:N[s.domain]}),s.tags?.slice(0,2).map(a=>e.jsx(d,{variant:"outline",className:"text-xs",children:a},a)),s.tags&&s.tags.length>2&&e.jsxs(d,{variant:"outline",className:"text-xs",children:["+",s.tags.length-2]})]})}),e.jsx(H,{className:"text-lg line-clamp-2",children:s.title}),e.jsxs(F,{className:"line-clamp-2",children:[e.jsx("strong",{children:"Question:"})," ",s.question]})]}),e.jsxs(h,{children:[s.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-3",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:s.view_count||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:s.clone_count||0})]})]}),e.jsx(I,{className:"h-4 w-4"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx("strong",{children:s.hypotheses?.length||0})," Hypotheses"]}),e.jsxs("div",{children:[e.jsx("strong",{children:s.evidence?.length||0})," Evidence"]})]})})]})]},s.id))}),e.jsx(x,{className:"mt-8 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"About ACH (Analysis of Competing Hypotheses)"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"ACH is a structured analytical technique that helps analysts identify and evaluate alternative explanations (hypotheses) by systematically comparing them against available evidence. It's particularly useful for complex intelligence problems where multiple explanations are possible and evidence is incomplete or ambiguous."})]})})]})}export{V as PublicACHLibraryPage};
