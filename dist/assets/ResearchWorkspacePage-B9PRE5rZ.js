import{j as e}from"./ui-vendor-DBphXmDA.js";import{k as q,f as W,r as n}from"./react-vendor-CfYLSWvh.js";import{C as r,a as l,b as d,c as k,d as i}from"./card-BQo7RV_Z.js";import{B as c,e as o}from"./index-DGGXJgUa.js";import{T as z,a as O,b as x,c as m}from"./tabs-Dznm0vhG.js";import{_ as C,W as v,e as D,aZ as T,D as F,w as S,bc as P,d as _}from"./icons-x9tcvtYN.js";import"./state-vendor-BXB5jEEt.js";const Q={academic:"ðŸŽ“",osint:"ðŸ”",investigation:"ðŸ•µï¸",business:"ðŸ’¼",journalism:"ðŸ“°",personal:"ðŸŒ±"},G={academic:"Academic Research",osint:"OSINT Investigation",investigation:"Private Investigation",business:"Business Research",journalism:"Investigative Journalism",personal:"Personal Research"};function Y(){const{id:h}=q(),p=W(),[a,E]=n.useState(null),[I,f]=n.useState(!0),[N,g]=n.useState(null),[R,A]=n.useState("overview");n.useEffect(()=>{h&&y(h)},[h]);const y=async s=>{f(!0),g(null);try{const t={id:s,question:"Sample Research Question",researchContext:"osint"},B=await(await fetch(`/api/research/tasks/list?researchQuestionId=${s}`)).json(),L=await(await fetch(`/api/research/evidence/list?researchQuestionId=${s}`)).json();E({researchQuestionId:s,question:t.question,researchContext:t.researchContext,tasks:B.tasks||[],evidence:L.evidence||[]})}catch(t){console.error("Failed to load workspace:",t),g("Failed to load research workspace")}finally{f(!1)}},w=async()=>{if(a)try{(await(await fetch("/api/research/workflow/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({researchQuestionId:a.researchQuestionId,researchContext:a.researchContext})})).json()).success&&y(a.researchQuestionId)}catch(s){console.error("Failed to initialize workflow:",s)}};if(I)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading workspace..."})]})});if(N||!a)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs(r,{className:"w-full max-w-md",children:[e.jsxs(l,{children:[e.jsx(d,{className:"text-red-500",children:"Error"}),e.jsx(k,{children:N||"Workspace not found"})]}),e.jsx(i,{children:e.jsxs(c,{onClick:()=>p("/dashboard/tools/research-question-generator"),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Back to Research Generator"]})})]})});const j=a.tasks.reduce((s,t)=>(s[t.workflow_stage]||(s[t.workflow_stage]=[]),s[t.workflow_stage].push(t),s),{}),b=Q[a.researchContext]||"ðŸ“‹",u=G[a.researchContext]||a.researchContext;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>p("/dashboard/tools/research-question-generator"),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:b}),e.jsx(o,{variant:"outline",children:u})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.question})]})]}),a.tasks.length===0&&e.jsxs(c,{onClick:w,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Initialize Workflow"]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(z,{value:R,onValueChange:A,children:[e.jsxs(O,{className:"grid w-full max-w-2xl grid-cols-4",children:[e.jsxs(x,{value:"overview",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(x,{value:"tasks",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Tasks (",a.tasks.length,")"]}),e.jsxs(x,{value:"evidence",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Evidence (",a.evidence.length,")"]}),e.jsxs(x,{value:"analysis",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Analysis"]})]}),e.jsxs(m,{value:"overview",className:"mt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(d,{className:"text-sm font-medium",children:"Total Tasks"})}),e.jsxs(i,{children:[e.jsx("div",{className:"text-3xl font-bold",children:a.tasks.length}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[a.tasks.filter(s=>s.status==="completed").length," completed"]})]})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(d,{className:"text-sm font-medium",children:"Evidence Items"})}),e.jsxs(i,{children:[e.jsx("div",{className:"text-3xl font-bold",children:a.evidence.length}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[a.evidence.filter(s=>s.verification_status==="verified").length," verified"]})]})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(d,{className:"text-sm font-medium",children:"Research Type"})}),e.jsx(i,{children:e.jsxs("div",{className:"text-2xl font-bold flex items-center",children:[e.jsx("span",{className:"mr-2",children:b}),u.split(" ")[0]]})})]})]}),a.tasks.length===0&&e.jsxs(r,{className:"mt-6",children:[e.jsxs(l,{children:[e.jsx(d,{children:"Get Started"}),e.jsx(k,{children:"Initialize your research workflow to get started with evidence collection and analysis"})]}),e.jsx(i,{children:e.jsxs(c,{onClick:w,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Initialize ",u," Workflow"]})})]})]}),e.jsx(m,{value:"tasks",className:"mt-6",children:a.workflow?.stages.map(s=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:s.name}),e.jsxs("div",{className:"space-y-2",children:[(j[s.id]||[]).map(t=>e.jsx(r,{children:e.jsxs(i,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.task_title}),t.task_description&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.task_description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{variant:t.priority==="urgent"?"destructive":"outline",children:t.priority}),e.jsx(o,{variant:t.status==="completed"?"default":"secondary",children:t.status})]})]})},t.id)),(!j[s.id]||j[s.id].length===0)&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic p-4",children:"No tasks in this stage"})]})]},s.id))}),e.jsx(m,{value:"evidence",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Evidence Collection"}),e.jsxs(c,{size:"sm",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Add Evidence"]})]}),a.evidence.map(s=>e.jsx(r,{children:e.jsx(i,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_,{className:"h-5 w-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.title}),s.content&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[s.content.substring(0,200),"..."]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(o,{variant:"outline",className:"text-xs",children:s.evidence_type}),e.jsx(o,{variant:s.verification_status==="verified"?"default":"secondary",className:"text-xs",children:s.verification_status}),s.credibility_score&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Score: ",(s.credibility_score*100).toFixed(0),"%"]})]})]})]})})})},s.id)),a.evidence.length===0&&e.jsx(r,{children:e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No evidence yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Start collecting evidence for your research"}),e.jsxs(c,{children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Add First Evidence"]})]})})]})}),e.jsx(m,{value:"analysis",className:"mt-6",children:e.jsx(r,{children:e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(S,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Analysis Tools"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Analysis tools coming soon"})]})})})]})})]})}export{Y as default};
