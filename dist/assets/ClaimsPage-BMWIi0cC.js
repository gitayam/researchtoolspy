import{j as e}from"./ui-vendor-DBphXmDA.js";import{k as D,f as P,r}from"./react-vendor-CfYLSWvh.js";import{u as V,I as $,S as b,z as N,C as k,E as y,F as a,e as h}from"./index-QqleixXe.js";import{C as i,a as x,c as u,b as o,d as j}from"./card-BGAig-Dv.js";import{a as z,d as Q,E as A,aj as B,T as H,az as U}from"./icons-x9tcvtYN.js";import"./state-vendor-BXB5jEEt.js";function W(){const{t:s}=V(["entities","common"]),{id:f}=D();P();const[l,_]=r.useState([]),[w,p]=r.useState(!0),[m,C]=r.useState(""),[n,S]=r.useState("all"),[c,L]=r.useState("all");r.useEffect(()=>{f||T()},[n,c,f]);const T=async()=>{p(!0);try{const t=new URLSearchParams({...n!=="all"&&{status:n},...c!=="all"&&{category:c}}),d=await fetch(`/api/claims?${t}`,{credentials:"include"}),g=await d.json();d.ok&&_(g.claims||[])}catch(t){console.error("Failed to load claims:",t)}finally{p(!1)}},E=t=>t<=30?"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/20":t<=70?"text-yellow-600 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/20":"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/20",F=t=>t<=30?e.jsx(B,{className:"h-4 w-4"}):t<=70?e.jsx(H,{className:"h-4 w-4"}):e.jsx(U,{className:"h-4 w-4"}),I=t=>{switch(t){case"verified":return"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400";case"debunked":return"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400";case"investigating":return"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-400"}},R=t=>{switch(t){case"statement":return"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400";case"quote":return"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400";case"statistic":return"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400";case"event":return"bg-teal-100 text-teal-700 dark:bg-teal-900/20 dark:text-teal-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-400"}},v=l.filter(t=>{const d=m.toLowerCase(),g=(t.adjusted_claim_text||t.claim_text).toLowerCase(),q=(t.content_title||"").toLowerCase();return g.includes(d)||q.includes(d)});return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:s("entities:claims.loading")})}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s("entities:claims.title")}),e.jsx("p",{className:"text-muted-foreground mt-1",children:s("entities:claims.description")})]})}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:s("entities:claims.search"),value:m,onChange:t=>C(t.target.value),className:"pl-10"})]})}),e.jsxs(b,{value:n,onValueChange:S,children:[e.jsx(N,{className:"w-[180px]",children:e.jsx(k,{placeholder:s("entities:claims.filterStatus")})}),e.jsxs(y,{children:[e.jsx(a,{value:"all",children:s("entities:claims.status.all")}),e.jsx(a,{value:"pending",children:s("entities:claims.status.pending")}),e.jsx(a,{value:"investigating",children:s("entities:claims.status.investigating")}),e.jsx(a,{value:"verified",children:s("entities:claims.status.verified")}),e.jsx(a,{value:"debunked",children:s("entities:claims.status.debunked")})]})]}),e.jsxs(b,{value:c,onValueChange:L,children:[e.jsx(N,{className:"w-[180px]",children:e.jsx(k,{placeholder:s("entities:claims.filterCategory")})}),e.jsxs(y,{children:[e.jsx(a,{value:"all",children:s("entities:claims.categories.all")}),e.jsx(a,{value:"statement",children:s("entities:claims.categories.statement")}),e.jsx(a,{value:"quote",children:s("entities:claims.categories.quote")}),e.jsx(a,{value:"statistic",children:s("entities:claims.categories.statistic")}),e.jsx(a,{value:"event",children:s("entities:claims.categories.event")}),e.jsx(a,{value:"relationship",children:s("entities:claims.categories.relationship")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(i,{children:e.jsxs(x,{className:"pb-2",children:[e.jsx(u,{children:s("entities:claims.stats.total")}),e.jsx(o,{className:"text-2xl",children:l.length})]})}),e.jsx(i,{children:e.jsxs(x,{className:"pb-2",children:[e.jsx(u,{children:s("entities:claims.stats.verified")}),e.jsx(o,{className:"text-2xl text-green-600",children:l.filter(t=>t.verification_status==="verified").length})]})}),e.jsx(i,{children:e.jsxs(x,{className:"pb-2",children:[e.jsx(u,{children:s("entities:claims.stats.debunked")}),e.jsx(o,{className:"text-2xl text-red-600",children:l.filter(t=>t.verification_status==="debunked").length})]})}),e.jsx(i,{children:e.jsxs(x,{className:"pb-2",children:[e.jsx(u,{children:s("entities:claims.stats.investigating")}),e.jsx(o,{className:"text-2xl text-blue-600",children:l.filter(t=>t.verification_status==="investigating").length})]})})]}),e.jsx("div",{className:"space-y-4",children:v.length===0?e.jsx(i,{children:e.jsxs(j,{className:"py-12 text-center",children:[e.jsx(Q,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:s(m||n!=="all"||c!=="all"?"entities:claims.empty":"entities:claims.emptyInitial")})]})}):v.map(t=>e.jsxs(i,{className:"hover:bg-accent/50 transition-colors",children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(h,{className:R(t.claim_category),children:t.claim_category}),e.jsx(h,{className:I(t.verification_status),children:s(`entities:claims.status.${t.verification_status}`)}),t.adjusted_claim_text&&e.jsx(h,{variant:"outline",children:s("entities:claims.edited")})]}),e.jsx(o,{className:"text-lg leading-relaxed",children:t.adjusted_claim_text||t.claim_text}),t.content_title&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:s("entities:claims.from")}),e.jsxs("a",{href:t.content_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 hover:text-primary",children:[t.content_title,e.jsx(A,{className:"h-3 w-3"})]})]})]}),e.jsxs("div",{className:"text-center min-w-[100px]",children:[e.jsxs("div",{className:`text-3xl font-bold flex items-center justify-center gap-2 ${E(t.adjusted_risk_score).split(" ")[0]}`,children:[F(t.adjusted_risk_score),t.adjusted_risk_score]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s("entities:claims.riskScore")}),t.adjusted_risk_score!==t.original_risk_score&&e.jsx("div",{className:"text-xs text-muted-foreground line-through",children:t.original_risk_score})]})]})}),t.user_comment&&e.jsx(j,{children:e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:s("entities:claims.assessment")}),e.jsx("p",{className:"text-sm",children:t.user_comment})]})}),e.jsx(j,{className:"pt-0",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[s("entities:claims.updated")," ",new Date(t.updated_at).toLocaleDateString()]}),t.adjusted_by_username&&e.jsxs("span",{children:[s("entities:claims.by")," ",t.adjusted_by_username]})]})})]},t.id))})]})}export{W as ClaimsPage};
