import{j as e}from"./ui-vendor-DBphXmDA.js";import{f as Ce,r as n}from"./react-vendor-CfYLSWvh.js";import{e as R,y as S,S as ne,z as re,C as le,E as ce,F as k,I as _,q as ie,B as y,A as D,r as Z,t as Se,D as ue,g as ge,h as je,k as z,j as ye}from"./index-QqleixXe.js";import{C as h,d as u,a as U,b as M,c as J}from"./card-BGAig-Dv.js";import{A as ze}from"./ACHAnalysisForm-DcPbgvDX.js";import{P as Ue}from"./progress-Cg1bbsHw.js";import{C as Me}from"./checkbox-DueJeeKx.js";import{S as ke,ab as fe,X as Je,W as oe,a as Ae,C as Te,h as ve,_ as Re,z as We,Z as Ge,E as $e,a7 as Ye,az as Qe,aK as K,d as X,Y as Ne,aj as we,aM as Be,$ as Ve,q as De}from"./icons-x9tcvtYN.js";import"./state-vendor-BXB5jEEt.js";import"./EvidenceItemForm-BJrEFzLU.js";import"./slider-B52ikc1m.js";import"./evidence-CClaHnJf.js";const be=[{id:"geopolitical",name:"Geopolitical Analysis",question:"What is the primary motivation behind [Actor]'s actions in [Region]?",sampleHypotheses:["Economic interests and resource control","Strategic territorial expansion","Defensive security concerns","Domestic political considerations"]},{id:"threat",name:"Threat Assessment",question:"What threat does [Actor/Group] pose to [Target]?",sampleHypotheses:["Imminent kinetic attack capability","Cyber operations and information warfare","Economic coercion and sanctions","Limited or no actual threat"]},{id:"attribution",name:"Attribution Analysis",question:"Who is responsible for [Incident/Event]?",sampleHypotheses:["State actor with advanced capabilities","Non-state actor or proxy group","Criminal organization","Accidental or natural cause"]},{id:"intent",name:"Intent Assessment",question:"What does [Actor] intend to achieve through [Actions]?",sampleHypotheses:["Strategic long-term objectives","Tactical short-term gains","Signaling or deterrence","Unintended consequences of other actions"]},{id:"custom",name:"Custom Analysis",question:"",sampleHypotheses:[]}];function Ze({initialData:m,onSave:f,onComplete:W,backPath:A}){const H=Ce(),j=[{id:1,name:"Define Question",description:"Formulate your intelligence question"},{id:2,name:"Generate Hypotheses",description:"Create competing hypotheses"},{id:3,name:"Select Evidence",description:"Link relevant evidence"},{id:4,name:"Score Matrix",description:"Evaluate evidence against hypotheses"},{id:5,name:"Review & Finalize",description:"Review and save your analysis"}],[l,G]=n.useState(1),[F,$]=n.useState(!1),[P,ee]=n.useState(null),[v,Y]=n.useState(m?.title||""),[g,p]=n.useState(m?.question||""),[N,L]=n.useState(m?.description||""),[T,Q]=n.useState(m?.analyst||""),[B,se]=n.useState(m?.organization||""),[E,te]=n.useState(m?.scale_type||"logarithmic"),[ae,V]=n.useState("custom"),[x,w]=n.useState(m?.hypotheses?.map(s=>({id:s.id,text:s.text,rationale:s.rationale,source:s.source}))||[{id:crypto.randomUUID(),text:"",rationale:"",source:""}]),[b,C]=n.useState(!1),[t,i]=n.useState([]),[r,d]=n.useState(m?.evidence?.map(s=>s.evidence_id)||[]),[o,I]=n.useState(""),[O,de]=n.useState(!1),Ee=l/j.length*100,_e=async()=>{if(!(t.length>0)){de(!0);try{const s=await fetch("/api/evidence-items");if(s.ok){const a=await s.json();i(a.evidence||[])}}catch(s){console.error("Failed to load evidence:",s)}finally{de(!1)}}},He=async()=>{if(!g.trim()){alert("Please enter an intelligence question first");return}C(!0);try{const s=await fetch("/api/ach/generate-hypotheses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:g})});if(!s.ok)throw new Error("Failed to generate hypotheses");const c=(await s.json()).hypotheses.map(q=>({id:crypto.randomUUID(),text:q,rationale:"Generated by AI based on question analysis",source:"GPT-4o-mini"}));w(c)}catch(s){console.error("Failed to generate hypotheses:",s),alert("Failed to generate hypotheses. Please create them manually.")}finally{C(!1)}},Fe=s=>{const a=be.find(c=>c.id===s);a&&(V(s),a.question&&p(a.question),a.sampleHypotheses.length>0&&w(a.sampleHypotheses.map(c=>({id:crypto.randomUUID(),text:c,rationale:"From template",source:a.name}))))},Pe=()=>{w([...x,{id:crypto.randomUUID(),text:"",rationale:"",source:""}])},Le=s=>{if(x.length<=1){alert("You must have at least one hypothesis");return}w(x.filter(a=>a.id!==s))},he=(s,a,c)=>{w(x.map(q=>q.id===s?{...q,[a]:c}:q))},xe=s=>{d(a=>a.includes(s)?a.filter(c=>c!==s):[...a,s])},me=t.filter(s=>{if(!o)return!0;const a=o.toLowerCase();return s.title.toLowerCase().includes(a)||s.description?.toLowerCase().includes(a)||s.tags.some(c=>c.toLowerCase().includes(a))}),pe=()=>{switch(l){case 1:return!!(v&&g);case 2:return x.filter(s=>s.text.trim()).length>=2;case 3:return r.length>0;case 4:return!0;case 5:return!0;default:return!1}},Ie=()=>{l===3&&t.length===0&&_e(),l<j.length&&(G(l+1),window.scrollTo({top:0,behavior:"smooth"}))},Oe=()=>{l>1&&(G(l-1),window.scrollTo({top:0,behavior:"smooth"}))},qe=async()=>{$(!0);try{const s=await f({title:v,question:g,description:N,analyst:T,organization:B,scale_type:E,status:"draft"});ee(s);for(let a=0;a<x.length;a++){const c=x[a];c.text.trim()&&await fetch("/api/ach/hypotheses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ach_analysis_id:s,text:c.text,rationale:c.rationale,source:c.source,order_num:a})})}for(const a of r)await fetch("/api/ach/evidence",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ach_analysis_id:s,evidence_id:a})});W?W(s):H(`/dashboard/analysis-frameworks/ach/${s}`)}catch(s){console.error("Failed to save ACH:",s),alert("Failed to save ACH analysis")}finally{$(!1)}};return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:j[l-1].name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j[l-1].description})]}),e.jsxs(R,{variant:"outline",children:["Step ",l," of ",j.length]})]}),e.jsx(Ue,{value:Ee,className:"h-2"})]})})}),l===1&&e.jsxs(h,{children:[e.jsxs(U,{children:[e.jsx(M,{children:"Define Intelligence Question"}),e.jsx(J,{children:"A clear, specific question will help generate better hypotheses"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Template (Optional)"}),e.jsxs(ne,{value:ae,onValueChange:Fe,children:[e.jsx(re,{children:e.jsx(le,{placeholder:"Select a template"})}),e.jsx(ce,{children:be.map(s=>e.jsx(k,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(S,{children:"Analysis Title *"}),e.jsx(_,{value:v,onChange:s=>Y(s.target.value),placeholder:"e.g., Russian Intentions in Ukraine"})]}),e.jsxs("div",{children:[e.jsx(S,{children:"Intelligence Question *"}),e.jsx(ie,{value:g,onChange:s=>p(s.target.value),placeholder:"e.g., What is Russia's primary strategic objective in Ukraine?",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Good questions are specific, answerable, and intelligence-relevant"})]}),e.jsxs("div",{children:[e.jsx(S,{children:"Description (Optional)"}),e.jsx(ie,{value:N,onChange:s=>L(s.target.value),placeholder:"Background context and scope of analysis",rows:3})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Analyst"}),e.jsx(_,{value:T,onChange:s=>Q(s.target.value),placeholder:"Your name"})]}),e.jsxs("div",{children:[e.jsx(S,{children:"Organization"}),e.jsx(_,{value:B,onChange:s=>se(s.target.value),placeholder:"Agency/Unit"})]})]}),e.jsxs("div",{children:[e.jsx(S,{children:"Scoring Scale"}),e.jsxs(ne,{value:E,onValueChange:s=>te(s),children:[e.jsx(re,{children:e.jsx(le,{})}),e.jsxs(ce,{children:[e.jsx(k,{value:"logarithmic",children:"Logarithmic (-5 to +5)"}),e.jsx(k,{value:"linear",children:"Linear (-3 to +3)"})]})]})]})]})]}),l===2&&e.jsx("div",{className:"space-y-4",children:e.jsxs(h,{children:[e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Generate Hypotheses"}),e.jsx(J,{children:"Create 4-6 competing hypotheses that answer your question"})]}),e.jsxs(y,{onClick:He,disabled:b||!g,variant:"outline",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),b?"Generating...":"AI Generate"]})]})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs(D,{children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsxs(Z,{children:[e.jsx("strong",{children:"ACH Tips:"})," Hypotheses should be mutually exclusive where possible, cover the spectrum of possibilities, and include at least one contrarian view."]})]}),x.map((s,a)=>e.jsx(h,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs(R,{className:"mt-1",children:["H",a+1]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(_,{value:s.text,onChange:c=>he(s.id,"text",c.target.value),placeholder:"Hypothesis statement"}),e.jsx(ie,{value:s.rationale||"",onChange:c=>he(s.id,"rationale",c.target.value),placeholder:"Rationale (optional)",rows:2,className:"text-sm"})]}),x.length>1&&e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>Le(s.id),children:e.jsx(Je,{className:"h-4 w-4"})})]})})},s.id)),e.jsxs(y,{onClick:Pe,variant:"outline",className:"w-full",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add Hypothesis"]})]})]})}),l===3&&e.jsxs(h,{children:[e.jsxs(U,{children:[e.jsx(M,{children:"Select Evidence"}),e.jsx(J,{children:"Choose evidence from your library to evaluate against hypotheses"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(_,{value:o,onChange:s=>I(s.target.value),placeholder:"Search evidence...",className:"flex-1"})]}),O?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading evidence..."}):me.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"No evidence found"}),e.jsx(y,{variant:"link",onClick:()=>H("/dashboard/evidence"),className:"mt-2",children:"Create evidence in Evidence Library →"})]}):e.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:me.map(s=>e.jsxs("div",{className:Se("flex items-start gap-3 p-3 border rounded-lg cursor-pointer transition-colors",r.includes(String(s.id))?"bg-primary/10 border-primary":"hover:bg-accent"),onClick:()=>xe(String(s.id)),children:[e.jsx(Me,{checked:r.includes(String(s.id)),onCheckedChange:()=>xe(String(s.id))}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.title}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:s.description}),s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.tags.map(a=>e.jsx(R,{variant:"secondary",className:"text-xs",children:a},a))})]})]},s.id))}),e.jsxs(D,{children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsxs(Z,{children:["Selected ",r.length," evidence item(s). You can add more evidence after creating the analysis."]})]})]})]}),l===4&&e.jsxs(h,{children:[e.jsxs(U,{children:[e.jsx(M,{children:"Matrix Scoring"}),e.jsx(J,{children:"You'll score evidence against hypotheses in the next step"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs(D,{children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx(Z,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:"How ACH Matrix Scoring Works:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Positive scores (+)"})," = Evidence supports hypothesis"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Negative scores (−)"})," = Evidence contradicts hypothesis"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Zero (0)"})," = Evidence is neutral or N/A"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Key insight:"})," The hypothesis with the LEAST contradictory evidence is typically most likely"]})]})]})})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Your Analysis Setup:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Question:"}),e.jsx("p",{className:"font-medium",children:g})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Scale:"}),e.jsx("p",{className:"font-medium",children:E==="logarithmic"?"Logarithmic (-5 to +5)":"Linear (-3 to +3)"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Hypotheses:"}),e.jsxs("p",{className:"font-medium",children:[x.filter(s=>s.text).length," hypotheses"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Evidence:"}),e.jsxs("p",{className:"font-medium",children:[r.length," items"]})]})]})]})]})]}),l===5&&e.jsxs(h,{children:[e.jsxs(U,{children:[e.jsx(M,{children:"Review & Finalize"}),e.jsx(J,{children:"Review your analysis before saving"})]}),e.jsxs(u,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Analysis Details"}),e.jsxs("dl",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Title:"}),e.jsx("dd",{className:"font-medium",children:v}),e.jsx("dt",{className:"text-muted-foreground",children:"Question:"}),e.jsx("dd",{className:"font-medium",children:g}),T&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"text-muted-foreground",children:"Analyst:"}),e.jsx("dd",{className:"font-medium",children:T})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2",children:["Hypotheses (",x.filter(s=>s.text).length,")"]}),e.jsx("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:x.filter(s=>s.text).map(s=>e.jsx("li",{children:s.text},s.id))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2",children:["Evidence (",r.length,")"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," evidence items selected from library"]})]}),e.jsxs(D,{children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx(Z,{children:`Click "Finish & Score" to create your ACH analysis. You'll be taken to the scoring matrix.`})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(y,{variant:"outline",onClick:()=>l===1?H(A):Oe(),children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),l===1?"Cancel":"Previous"]}),l<j.length?e.jsxs(y,{onClick:Ie,disabled:!pe(),children:["Next",e.jsx(We,{className:"h-4 w-4 ml-2"})]}):e.jsxs(y,{onClick:qe,disabled:F||!pe(),children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),F?"Saving...":"Finish & Score"]})]})]})}const Ke={ach:{context:"ACH is a structured intelligence analysis methodology developed by CIA analyst Richards J. Heuer Jr. in the 1970s. Unlike conventional analysis that seeks to confirm hypotheses, ACH focuses on disproving them by systematically evaluating evidence against multiple competing explanations. This approach helps overcome confirmation bias and provides more rigorous, defensible conclusions. ACH is now widely used in intelligence, law enforcement, and business analysis.",wikipediaUrl:"https://en.wikipedia.org/wiki/Analysis_of_competing_hypotheses",goodUseCases:["Intelligence analysis with multiple possible explanations","Criminal investigations with competing theories","Medical diagnosis with differential diagnoses","Root cause analysis of complex failures or incidents","Evaluating competing strategic options","Due diligence investigations requiring rigorous analysis"],notIdealFor:["Problems with only one plausible explanation","Time-sensitive decisions requiring immediate action","Issues without sufficient evidence for evaluation","Brainstorming or creative exploration phases","Problems where intuition and experience are primary decision factors"]}};function hs(){const m=Ce(),[f,W]=n.useState([]),[A,H]=n.useState(""),[j,l]=n.useState("all"),[G,F]=n.useState(!0),[$,P]=n.useState(!1),[ee,v]=n.useState(!1),[Y,g]=n.useState("create"),[p,N]=n.useState(void 0),L=async()=>{try{F(!0);const t=await fetch("/api/ach");if(t.ok){const i=await t.json();W(i.analyses||[])}}catch(t){console.error("Failed to load ACH analyses:",t)}finally{F(!1)}};n.useEffect(()=>{L()},[]);const T=async t=>{if(confirm("Are you sure you want to delete this analysis? This will also delete all hypotheses, evidence links, and scores."))try{(await fetch(`/api/ach?id=${t}`,{method:"DELETE"})).ok&&await L()}catch(i){console.error("Failed to delete analysis:",i),alert("Failed to delete analysis")}},Q=()=>{g("create"),N(void 0),P(!0)},B=async t=>{try{const i=await fetch(`/api/ach?id=${t}`);if(i.ok){const r=await i.json();g("edit"),N(r),P(!0)}}catch(i){console.error("Failed to load analysis:",i),alert("Failed to load analysis")}},se=async t=>{try{if(Y==="edit"&&p?.id){if(!(await fetch(`/api/ach?id=${p.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t.title,description:t.description,question:t.question,analyst:t.analyst,organization:t.organization,scale_type:t.scale_type,status:t.status})})).ok)throw new Error("Failed to update analysis");if(p.hypotheses)for(const o of p.hypotheses)t.hypotheses.find(O=>O.id===o.id)||await fetch(`/api/ach/hypotheses?id=${o.id}`,{method:"DELETE"});for(const o of t.hypotheses)o.id?await fetch(`/api/ach/hypotheses?id=${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}):await fetch("/api/ach/hypotheses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,ach_analysis_id:p.id})});const r=p.evidence?.map(o=>o.evidence_id)||[],d=t.evidence_ids||[];for(const o of r)if(!d.includes(o)){const I=p.evidence?.find(O=>O.evidence_id===o);I?.link_id&&await fetch(`/api/ach/evidence?id=${I.link_id}`,{method:"DELETE"})}for(const o of d)r.includes(o)||await fetch("/api/ach/evidence",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ach_analysis_id:p.id,evidence_id:o})})}else{const i=await fetch("/api/ach",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t.title,description:t.description,question:t.question,analyst:t.analyst,organization:t.organization,scale_type:t.scale_type,status:t.status})});if(!i.ok)throw new Error("Failed to create analysis");const r=await i.json();for(const d of t.hypotheses)await fetch("/api/ach/hypotheses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,ach_analysis_id:r.id})});if(t.evidence_ids&&t.evidence_ids.length>0)for(const d of t.evidence_ids)await fetch("/api/ach/evidence",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ach_analysis_id:r.id,evidence_id:d})});m(`/dashboard/analysis-frameworks/ach-dashboard/${r.id}`)}await L(),P(!1),N(void 0)}catch(i){throw console.error("Error saving analysis:",i),i}},E=t=>{m(`/dashboard/analysis-frameworks/ach-dashboard/${t}`)},te=async t=>{try{const i=await fetch("/api/ach",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok)throw new Error("Failed to create ACH");return(await i.json()).id}catch(i){throw console.error("Failed to create ACH:",i),i}},ae=t=>{v(!1),m(`/dashboard/analysis-frameworks/ach-dashboard/${t}`)},V=f.filter(t=>{const i=t.title.toLowerCase().includes(A.toLowerCase())||t.question.toLowerCase().includes(A.toLowerCase())||t.description?.toLowerCase().includes(A.toLowerCase()),r=j==="all"||t.status===j;return i&&r}),x=t=>{switch(t){case"completed":return we;case"in_progress":return Ne;case"draft":return X;default:return X}},w=t=>{switch(t){case"completed":return"text-green-600 dark:text-green-400";case"in_progress":return"text-blue-600 dark:text-blue-400";case"draft":return"text-gray-600 dark:text-gray-400";default:return"text-gray-600 dark:text-gray-400"}},b={total:f.length,draft:f.filter(t=>t.status==="draft").length,in_progress:f.filter(t=>t.status==="in_progress").length,completed:f.filter(t=>t.status==="completed").length},C=Ke.ach;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"ACH Analysis"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analysis of Competing Hypotheses - Structured intelligence methodology"})]}),e.jsxs(ue,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(y,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"New Analysis"]})}),e.jsxs(je,{align:"end",children:[e.jsxs(z,{onClick:()=>v(!0),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Wizard (Recommended)"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Step-by-step with AI assistance"})]})]}),e.jsx(ye,{}),e.jsxs(z,{onClick:Q,children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Quick Create"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Manual form entry"})]})]})]})]})]}),e.jsx(h,{className:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:C.context}),e.jsxs("a",{href:C.wikipediaUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline",children:["Learn more on Wikipedia",e.jsx($e,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-green-700 dark:text-green-400 mb-2 flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Good Use Cases"]}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 dark:text-gray-300 space-y-1",children:C.goodUseCases.map((t,i)=>e.jsx("li",{children:t},i))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-red-700 dark:text-red-400 mb-2 flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Not Ideal For"]}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 dark:text-gray-300 space-y-1",children:C.notIdealFor.map((t,i)=>e.jsx("li",{children:t},i))})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Analyses"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.total})]}),e.jsx(K,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Draft"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:b.draft})]}),e.jsx(X,{className:"h-8 w-8 text-gray-500"})]})})}),e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:b.in_progress})]}),e.jsx(Ne,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:b.completed})]}),e.jsx(we,{className:"h-8 w-8 text-green-500"})]})})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(_,{placeholder:"Search analyses...",className:"pl-10",value:A,onChange:t=>H(t.target.value)})]}),e.jsxs(ne,{value:j,onValueChange:t=>l(t),children:[e.jsx(re,{className:"w-48",children:e.jsx(le,{placeholder:"Filter by status"})}),e.jsxs(ce,{children:[e.jsx(k,{value:"all",children:"All Statuses"}),e.jsx(k,{value:"draft",children:"Draft"}),e.jsx(k,{value:"in_progress",children:"In Progress"}),e.jsx(k,{value:"completed",children:"Completed"})]})]})]}),e.jsx("div",{className:"space-y-4",children:G?e.jsx(h,{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading analyses..."})}):V.length===0?e.jsxs(h,{className:"p-12 text-center",children:[e.jsx(K,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"No Analyses Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-500 mb-4",children:f.length===0?"Start your intelligence analysis by creating your first ACH matrix.":"Try adjusting your search criteria or filters."}),e.jsxs(y,{onClick:Q,children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create Your First Analysis"]})]}):V.map(t=>{const i=x(t.status),r=w(t.status);return e.jsx(h,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>E(t.id),children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800",children:e.jsx(K,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:t.title}),e.jsxs(R,{variant:"outline",className:"text-xs",children:[e.jsx(i,{className:Se("h-3 w-3 mr-1",r)}),t.status.replace("_"," ")]}),e.jsx(R,{variant:"secondary",className:"text-xs",children:t.scale_type})]}),e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t.question}),t.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:t.description}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600 dark:text-gray-400",children:[t.hypotheses&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.hypotheses.length," hypotheses"]})]}),t.evidence&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.evidence.length," evidence"]})]}),t.analyst&&e.jsxs("div",{children:["Analyst: ",t.analyst]})]})]})]}),e.jsxs(ue,{children:[e.jsx(ge,{asChild:!0,onClick:d=>d.stopPropagation(),children:e.jsx(y,{variant:"ghost",size:"icon",children:e.jsx(Be,{className:"h-4 w-4"})})}),e.jsxs(je,{align:"end",children:[e.jsxs(z,{onClick:d=>{d.stopPropagation(),E(t.id)},children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Open Matrix"]}),e.jsxs(z,{onClick:d=>{d.stopPropagation(),B(t.id)},children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Edit Details"]}),e.jsx(ye,{}),e.jsxs(z,{className:"text-red-600",onClick:d=>{d.stopPropagation(),T(t.id)},children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})},t.id)})}),e.jsx(ze,{open:$,onClose:()=>{P(!1),N(void 0)},onSave:se,initialData:p,mode:Y}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 overflow-y-auto",children:e.jsx("div",{className:"min-h-screen px-4 py-8 bg-gray-50 dark:bg-gray-900",children:e.jsx(Ze,{onSave:te,onComplete:ae,backPath:"/dashboard/analysis-frameworks/ach-dashboard"})})})]})}export{hs as ACHPage};
